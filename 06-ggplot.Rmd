---
title: "06-ggplot"
author: "Lanning"
date: "`r Sys.Date()`"
output:
  pdf_document: default
  html_document: default
---

# visualization in R with ggplot

## status 80% {-}

Text is OK, but students in 2019 produced some pretty weak visualizations. Anscombe data needs to be simplified, leading to another homework assignment. Students need a more solid understanding of problems with pie charts, 3d bar graphs, etc. This could be done in the prior chapter, but it would be better to expand on it here, leading to a project within a few weeks.

In the last chapter, we introduced data visualization, citing "vision-aries" including Edward Tufte and Hans Rosling, inspired works such as Minard's *Carte Figurative* and Periscopic's *stolen years*, as well as a few cautionary tales of misleading and confusing graphs. 

Here, in playing with and learning the R package **ggplot**, we begin to move from consumers to creators of data visualizations.

As the first visualization in @wickham2016r reminds us, data visualization is at the core of exploratory data analysis: 

![Fig 6.1: Data visualization is at the core of data analysis (@wickham2016r)](dataviscycle.PNG)

In the world of data science, statistical programming is about discovering and communicating truths within your data. This **exploratory data analysis is the corner of science, particularly at a time in which confirmatory studies are increasingly found to be unreproducible**. 

Most of your reading will be from Chapter 3 of @wickham2016r, this is intended only as a supplement. 

## picture > (words, numbers)?

The chapter begins with a quote from John Tukey about the importance of graphs.  Yet there is a tendency among some statisticians and scientists to consider graphic representations of data as less valuable than statistical ones.  

Perhaps, if a picture is worth a thousand words, a graph can likewise tell us more than good solid numbers. Consider 'Anscombe's quartet' (screenshot below, live at http://bit.ly/anscombe2019):

![Table 6.1: An adaptation of Anscombe's "quartet" [@anscombe1973american]](spreadsheet61.PNG)

>   **Exercise 6_1** 
>   *Consider the spreadsheet chunk presented above, which I am characterizing as data collected on a sample of ten primary school children at recess on four consecutive days. Working with your classmates, compute the mean, standard deviation, and correlation between the two measures for one day. Share your results with the class.* 

The four pairs of variables in @anscombe1973american appear statistically "the same," yet the data suggest something else.  Later, we'll try to plot these. Perhaps graphs can reveal truths that statistics can hide.  

## your ggplots

In class, we will review and recreate the plots in section 3.2 of @wickham2016r and exercises through 3.4. 

Savor this section, reading slowly, and playing around with the RStudio interface.  For example, read about the mpg data in the 'help' panel, pull up the mpg data in a view window, and sort through it by clicking on various columns. 

![Fig. 6.2: A screenshot from RStudio, showing the mpg dataset](rstudio62.PNG)


## facets - displaying the Anscombe data

When we get to section 5 (facets), it may occur to you that this would be a nice way to display the Anscombe data. Fortunately, they are already, like many other datasets, stored in R. 

```{r, warning=FALSE, message=FALSE}
library (tidyverse)
# to get a list of preloaded datasets, uncomment this line
# data()
data(anscombe)
str(anscombe)
head(anscombe)
```

Unfortunately, the Anscombe data in R have a different structure. Here's one way to reshape it:
```{r}
anscombe$kid <- c("Al", "Barb",
                   "Cathy", "Dirk",
                   "Edwin", "Flo",
                   "George", "Henry",
                   "Isaiah", "Jim",
                   "Ken") 
# make a file anscombe2 from anscombe
anscombe2 <- anscombe %>%
# make a new variable called x from x1:x4    
    gather(x,levelx,x1,x2,x3,x4,
# don't mess with the other variables
           -c(y1,y2,y3,y4,kid))
# to peek at it, uncomment the next line.
# head(anscombe2)
anscombe2 <- anscombe2 %>% 
    gather(y,levely,y1,y2,y3,y4,
           -c(x,levelx,kid)) %>% 
# keep only pairs where the x and y vars are the same
    filter (substr(x,2,2) == substr(y,2,2)) %>% 
# drop one of these 
    select (-y) %>% 
    mutate(x = recode(x,
                      x1="Mon",x2 = "Tue",
                      x3 = "Wed", x4 = "Thu"))
head(anscombe2)
str(anscombe2)
```

Copy this code into your console, then try applying the code in 3.5 to the Anscombe data. Keep track of your challenges...and save your work.

## exploring more data

Choose one of the datasets in R, pull out a few variables, and explore these.  

Try to make a cool graph - one that informs the viewer, and, to paraphrase Tukey, helps us see what we don't expect.

Try several different displays. Which fail?  Which succeed? Be prepared to share your efforts on Wednesday.

Don't be afraid to screw up. What's the worst that can happen?

## R is the bomb

This is the worst that can happen. It probably won't, today at least, maybe not this term.  But in your fiddling, exploring, and messing around, you may tax your machine or even find a bug.  Saving your work, in R as in other things, is always a good idea.


![Fig 6.3: Yes, R is the bomb](C:\Users\lanning\Dropbox\0DataSciLibArts\risthebomb.PNG)
