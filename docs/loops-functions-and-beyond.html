<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>14 loops, functions, and beyond | Data science for the liberal arts</title>
  <meta name="description" content="Test" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="14 loops, functions, and beyond | Data science for the liberal arts" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="chihuahuamuffin.png" />
  <meta property="og:description" content="Test" />
  <meta name="github-repo" content="kevinlanning/DataSciLibArts" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="14 loops, functions, and beyond | Data science for the liberal arts" />
  
  <meta name="twitter:description" content="Test" />
  <meta name="twitter:image" content="chihuahuamuffin.png" />

<meta name="author" content="Kevin Lanning" />


<meta name="date" content="2021-03-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lists.html"/>
<link rel="next" href="references.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>preface</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#some-features-of-the-text"><i class="fa fa-check"></i>some features of the text</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#the-book-is-for-you"><i class="fa fa-check"></i>the book is for you</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#part-introduction"><i class="fa fa-check"></i>(PART) Introduction</a>
<ul>
<li class="chapter" data-level="0.1" data-path="preface.html"><a href="preface.html#type-c-data-science-data-science-for-the-liberal-arts"><i class="fa fa-check"></i><b>0.1</b> type C data science = data science for the liberal arts</a></li>
<li class="chapter" data-level="0.2" data-path="preface.html"><a href="preface.html#the-incompleteness-of-the-data-science-venn-diagram"><i class="fa fa-check"></i><b>0.2</b> the incompleteness of the data science Venn diagram</a></li>
<li class="chapter" data-level="0.3" data-path="preface.html"><a href="preface.html#a-dimension-of-depth"><i class="fa fa-check"></i><b>0.3</b> a dimension of depth</a></li>
<li class="chapter" data-level="0.4" data-path="preface.html"><a href="preface.html#google-and-the-liberal-arts"><i class="fa fa-check"></i><b>0.4</b> Google and the liberal arts</a></li>
<li class="chapter" data-level="0.5" data-path="preface.html"><a href="preface.html#data-sci-and-tmi"><i class="fa fa-check"></i><b>0.5</b> data sci and TMI</a></li>
<li class="chapter" data-level="0.6" data-path="preface.html"><a href="preface.html#discussion-what-will-you-do-with-data-science"><i class="fa fa-check"></i><b>0.6</b> discussion: what will you do with data science?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> getting started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#are-you-already-a-programmer-and-statistician"><i class="fa fa-check"></i><b>1.1</b> are you already a programmer and statistician?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#some-best-practices-for-spreadsheets"><i class="fa fa-check"></i><b>1.2</b> some best practices for spreadsheets</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#setting-up-your-machine-some-basic-tools"><i class="fa fa-check"></i><b>1.3</b> setting up your machine: some basic tools</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#a-modified-15-minute-rule"><i class="fa fa-check"></i><b>1.4</b> a modified 15-minute rule</a></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#discussion-who-deserves-a-good-grade"><i class="fa fa-check"></i><b>1.5</b> discussion: who deserves a good grade?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="welcome-to-r-world.html"><a href="welcome-to-r-world.html"><i class="fa fa-check"></i><b>2</b> welcome to R world</a>
<ul>
<li class="chapter" data-level="2.1" data-path="welcome-to-r-world.html"><a href="welcome-to-r-world.html#using-rstudio-cloud"><i class="fa fa-check"></i><b>2.1</b> Using RStudio cloud</a></li>
<li class="chapter" data-level="2.2" data-path="welcome-to-r-world.html"><a href="welcome-to-r-world.html#using-r-studio-on-your-laptop"><i class="fa fa-check"></i><b>2.2</b> Using R Studio on your laptop</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-stands-for.html"><a href="r-stands-for.html"><i class="fa fa-check"></i><b>3</b> R stands for …</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-stands-for.html"><a href="r-stands-for.html#a-few-characteristics-of-r"><i class="fa fa-check"></i><b>3.1</b> a few characteristics of R</a></li>
<li class="chapter" data-level="3.2" data-path="r-stands-for.html"><a href="r-stands-for.html#finding-help"><i class="fa fa-check"></i><b>3.2</b> finding help</a></li>
<li class="chapter" data-level="3.3" data-path="r-stands-for.html"><a href="r-stands-for.html#wickham-and-r-for-data-science"><i class="fa fa-check"></i><b>3.3</b> Wickham and R for Data Science</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html"><i class="fa fa-check"></i><b>4</b> now draw the rest of the owl</a>
<ul>
<li class="chapter" data-level="4.1" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#review-the-rstudio-cloud-primers"><i class="fa fa-check"></i><b>4.1</b> Review the RStudio cloud primers</a></li>
<li class="chapter" data-level="4.2" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#play-with-rstudio-on-your-laptop"><i class="fa fa-check"></i><b>4.2</b> Play with RStudio on your laptop</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#create-a-new-r-markdown-document-and-knit-it-to-a-pdf-or-a-word-doc"><i class="fa fa-check"></i><b>4.2.1</b> Create a new R Markdown document and knit it to a PDF or a Word doc</a></li>
<li class="chapter" data-level="4.2.2" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#play-with-and-explore-the-movies-data"><i class="fa fa-check"></i><b>4.2.2</b> Play with and explore the movies data</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#take-a-datacamp-class"><i class="fa fa-check"></i><b>4.3</b> Take a DataCamp class</a></li>
<li class="chapter" data-level="4.4" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#swirl-swirlstats"><i class="fa fa-check"></i><b>4.4</b> Swirl (Swirlstats)</a></li>
<li class="chapter" data-level="4.5" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#read-pengs-text-andor-watch-the-associated-videos"><i class="fa fa-check"></i><b>4.5</b> Read Peng’s text and/or watch the associated videos</a></li>
<li class="chapter" data-level="4.6" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#code-along-with-a-tidy-webinar-or-attend-a-virtual-conference"><i class="fa fa-check"></i><b>4.6</b> Code along with a tidy webinar, or attend a virtual conference</a></li>
<li class="chapter" data-level="4.7" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#something-else"><i class="fa fa-check"></i><b>4.7</b> Something else</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#part-part-ii-towards-data-literacy"><i class="fa fa-check"></i>(PART) Part II Towards data literacy</a>
<ul>
<li class="chapter" data-level="4.8" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#some-opening-thoughts"><i class="fa fa-check"></i><b>4.8</b> some opening thoughts</a></li>
<li class="chapter" data-level="4.9" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#some-early-graphs"><i class="fa fa-check"></i><b>4.9</b> some early graphs</a></li>
<li class="chapter" data-level="4.10" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#tukey-and-eda"><i class="fa fa-check"></i><b>4.10</b> Tukey and EDA</a></li>
<li class="chapter" data-level="4.11" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#approaches-to-graphs"><i class="fa fa-check"></i><b>4.11</b> approaches to graphs</a></li>
<li class="chapter" data-level="4.12" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#tufte-first-principles"><i class="fa fa-check"></i><b>4.12</b> Tufte: first principles</a></li>
<li class="chapter" data-level="4.13" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#the-politics-of-data-visualization"><i class="fa fa-check"></i><b>4.13</b> the politics of data visualization</a>
<ul>
<li class="chapter" data-level="4.13.1" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#poor-design-leads-to-an-uninformed-or-misinformed-world"><i class="fa fa-check"></i><b>4.13.1</b> poor design leads to an uninformed or misinformed world</a></li>
<li class="chapter" data-level="4.13.2" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#poor-design-can-be-a-tool-to-deceive"><i class="fa fa-check"></i><b>4.13.2</b> poor design can be a tool to deceive</a></li>
</ul></li>
<li class="chapter" data-level="4.14" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#the-psychology-of-data-visualization"><i class="fa fa-check"></i><b>4.14</b> the psychology of data visualization</a>
<ul>
<li class="chapter" data-level="4.14.1" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#the-power-of-animation"><i class="fa fa-check"></i><b>4.14.1</b> the power of animation</a></li>
<li class="chapter" data-level="4.14.2" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#telling-the-truth-when-the-truth-is-unclear"><i class="fa fa-check"></i><b>4.14.2</b> telling the truth when the truth is unclear</a></li>
<li class="chapter" data-level="4.14.3" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#visualizing-uncertainty"><i class="fa fa-check"></i><b>4.14.3</b> visualizing uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="4.15" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#further-reading-and-resources"><i class="fa fa-check"></i><b>4.15</b> further reading and resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualization-in-r-with-ggplot.html"><a href="visualization-in-r-with-ggplot.html"><i class="fa fa-check"></i><b>5</b> visualization in R with ggplot</a>
<ul>
<li class="chapter" data-level="5.1" data-path="visualization-in-r-with-ggplot.html"><a href="visualization-in-r-with-ggplot.html#a-picture-words-numbers"><i class="fa fa-check"></i><b>5.1</b> a picture &gt; (words, numbers)?</a></li>
<li class="chapter" data-level="5.2" data-path="visualization-in-r-with-ggplot.html"><a href="visualization-in-r-with-ggplot.html#read-hadley-ggplots"><i class="fa fa-check"></i><b>5.2</b> Read Hadley ggplots</a></li>
<li class="chapter" data-level="5.3" data-path="visualization-in-r-with-ggplot.html"><a href="visualization-in-r-with-ggplot.html#exploring-more-data"><i class="fa fa-check"></i><b>5.3</b> exploring more data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html"><i class="fa fa-check"></i><b>6</b> examining local COVID data in R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#tracking-the-novel-coronavirus-from-feb-2020"><i class="fa fa-check"></i><b>6.1</b> tracking the Novel Coronavirus (from Feb 2020)</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#reading-the-data-feb-2020"><i class="fa fa-check"></i><b>6.1.1</b> reading the data (Feb 2020)</a></li>
<li class="chapter" data-level="6.1.2" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#cleaning-wrangling-munging-the-data-feb-2020"><i class="fa fa-check"></i><b>6.1.2</b> cleaning (wrangling, munging) the data (Feb 2020)</a></li>
<li class="chapter" data-level="6.1.3" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#eleven-months-later-the-code-still-runs"><i class="fa fa-check"></i><b>6.1.3</b> eleven months later: the code still runs!</a></li>
<li class="chapter" data-level="6.1.4" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#shall-we-graph-it-feb-2021"><i class="fa fa-check"></i><b>6.1.4</b> shall we graph it? (Feb 2021)</a></li>
<li class="chapter" data-level="6.1.5" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#too-bad"><i class="fa fa-check"></i><b>6.1.5</b> too bad</a></li>
<li class="chapter" data-level="6.1.6" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#what-now"><i class="fa fa-check"></i><b>6.1.6</b> what now?</a></li>
<li class="chapter" data-level="6.1.7" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#an-initial-plot-feb-2020"><i class="fa fa-check"></i><b>6.1.7</b> an initial plot (Feb 2020)</a></li>
<li class="chapter" data-level="6.1.8" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#five-weeks-later-mar-2020"><i class="fa fa-check"></i><b>6.1.8</b> five weeks later (Mar 2020)</a></li>
<li class="chapter" data-level="6.1.9" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#adding-recovered-cases-code-from-feb-data-through-mar-2020"><i class="fa fa-check"></i><b>6.1.9</b> adding recovered cases (code from Feb, data through Mar 2020)</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#plotting-confirmed-cases-feb-mar-2020"><i class="fa fa-check"></i><b>6.2</b> plotting confirmed cases (Feb-Mar 2020)</a></li>
<li class="chapter" data-level="6.3" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#status-feb-2021"><i class="fa fa-check"></i><b>6.3</b> status (Feb 2021)</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#an-assignment"><i class="fa fa-check"></i><b>6.3.1</b> an assignment</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="examining-local-covid-data-in-r.html"><a href="examining-local-covid-data-in-r.html#how-to-create-new-knowledge"><i class="fa fa-check"></i><b>6.4</b> how to create new knowledge</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html"><i class="fa fa-check"></i><b>7</b> on probability and statistics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#on-probability"><i class="fa fa-check"></i><b>7.1</b> on probability</a></li>
<li class="chapter" data-level="7.2" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#the-rules-of-probability"><i class="fa fa-check"></i><b>7.2</b> the rules of probability</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#keeping-conditional-probabilities-straight"><i class="fa fa-check"></i><b>7.2.1</b> keeping conditional probabilities straight</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#continuous-probability-distributions"><i class="fa fa-check"></i><b>7.3</b> continuous probability distributions</a></li>
<li class="chapter" data-level="7.4" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#the-most-dangerous-equation"><i class="fa fa-check"></i><b>7.4</b> the most dangerous equation</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html"><i class="fa fa-check"></i><b>8</b> reproducibility and the replication crisis</a>
<ul>
<li class="chapter" data-level="8.1" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#answers-to-the-reproducibility-crisis"><i class="fa fa-check"></i><b>8.1</b> Answers to the reproducibility crisis</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#tweak-or-abandon-nhst"><i class="fa fa-check"></i><b>8.1.1</b> Tweak or abandon NHST</a></li>
<li class="chapter" data-level="8.1.2" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#keep-a-log-of-every-step-of-every-analysis-in-r-markdown-or-jupyter-notebooks"><i class="fa fa-check"></i><b>8.1.2</b> keep a log of every step of every analysis in R markdown or Jupyter notebooks</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#answers-to-the-reproducibility-crisis-iii-pre-registration"><i class="fa fa-check"></i><b>8.2</b> answers to the reproducibility crisis III: Pre-registration</a></li>
<li class="chapter" data-level="8.3" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#further-readings"><i class="fa fa-check"></i><b>8.3</b> further readings</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#part-part-iii-towards-data-proficiency"><i class="fa fa-check"></i>(PART) Part III Towards data proficiency</a>
<ul>
<li class="chapter" data-level="8.4" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#scripts-are-files-of-code"><i class="fa fa-check"></i><b>8.4</b> scripts are files of code</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#some-elements-of-coding-style"><i class="fa fa-check"></i><b>8.4.1</b> some elements of coding style</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#projects-are-directories-containing-related-scripts"><i class="fa fa-check"></i><b>8.5</b> projects are directories containing related scripts</a></li>
<li class="chapter" data-level="8.6" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#r-markdown-documents-integrate-rationale-script-and-results"><i class="fa fa-check"></i><b>8.6</b> R markdown documents integrate rationale, script, and results</a></li>
<li class="chapter" data-level="8.7" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#what-to-do-when-you-are-stuck"><i class="fa fa-check"></i><b>8.7</b> What to do when you are stuck</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="the-tidyverse.html"><a href="the-tidyverse.html"><i class="fa fa-check"></i><b>9</b> the tidyverse</a>
<ul>
<li class="chapter" data-level="9.1" data-path="the-tidyverse.html"><a href="the-tidyverse.html#some-simple-principles"><i class="fa fa-check"></i><b>9.1</b> some simple principles</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="finding-exploring-and-cleaning-data.html"><a href="finding-exploring-and-cleaning-data.html"><i class="fa fa-check"></i><b>10</b> finding, exploring, and cleaning data</a>
<ul>
<li class="chapter" data-level="10.1" data-path="finding-exploring-and-cleaning-data.html"><a href="finding-exploring-and-cleaning-data.html#data-in-r-libraries"><i class="fa fa-check"></i><b>10.1</b> Data in R libraries</a></li>
<li class="chapter" data-level="10.2" data-path="finding-exploring-and-cleaning-data.html"><a href="finding-exploring-and-cleaning-data.html#other-prepared-datasets"><i class="fa fa-check"></i><b>10.2</b> Other prepared datasets</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="finding-exploring-and-cleaning-data.html"><a href="finding-exploring-and-cleaning-data.html#keep-it-manageable"><i class="fa fa-check"></i><b>10.2.1</b> Keep it manageable</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="finding-exploring-and-cleaning-data.html"><a href="finding-exploring-and-cleaning-data.html#makeextractcombine-your-own-data"><i class="fa fa-check"></i><b>10.3</b> Make/extract/combine your own data</a></li>
<li class="chapter" data-level="10.4" data-path="finding-exploring-and-cleaning-data.html"><a href="finding-exploring-and-cleaning-data.html#exploring-data"><i class="fa fa-check"></i><b>10.4</b> exploring data</a></li>
<li class="chapter" data-level="10.5" data-path="finding-exploring-and-cleaning-data.html"><a href="finding-exploring-and-cleaning-data.html#messy-data-cleaning-and-curation"><i class="fa fa-check"></i><b>10.5</b> messy data: Cleaning and curation</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html"><i class="fa fa-check"></i><b>11</b> transforming and joining data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html#from-data-on-the-web-to-data-in-r"><i class="fa fa-check"></i><b>11.1</b> from data on the web to data in R</a></li>
<li class="chapter" data-level="11.2" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html#working-with-geodata-a-function-to-get-us-states-from-latitudelongitude"><i class="fa fa-check"></i><b>11.2</b> working with geodata: a function to get US states from latitude/longitude</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html#applying-the-function-to-the-music-data"><i class="fa fa-check"></i><b>11.2.1</b> applying the function to the music data</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html#drowning-in-the-sea-of-songs-with-apologies-to-artist-arivoim1187b990643"><i class="fa fa-check"></i><b>11.3</b> drowning in the sea of songs (with apologies to Artist #<em>ARIVOIM1187B990643</em>)</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html#combining-the-song-titles-with-our-us-artists"><i class="fa fa-check"></i><b>11.3.1</b> combining the song titles with our US artists</a></li>
<li class="chapter" data-level="11.3.2" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html#exercises"><i class="fa fa-check"></i><b>11.3.2</b> exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html#review-of-munging-tools"><i class="fa fa-check"></i><b>11.4</b> review of munging tools</a></li>
<li class="chapter" data-level="11.5" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html#more-about-joining"><i class="fa fa-check"></i><b>11.5</b> more about joining</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="transforming-and-joining-data.html"><a href="transforming-and-joining-data.html#more-about-munging"><i class="fa fa-check"></i><b>11.5.1</b> more about munging</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html"><i class="fa fa-check"></i><b>12</b> strings, factors, dates, and times</a>
<ul>
<li class="chapter" data-level="12.1" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#strings"><i class="fa fa-check"></i><b>12.1</b> strings</a></li>
<li class="chapter" data-level="12.2" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#factors"><i class="fa fa-check"></i><b>12.2</b> factors</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#types-of-babies"><i class="fa fa-check"></i><b>12.2.1</b> types of babies</a></li>
<li class="chapter" data-level="12.2.2" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#types-of-grown-ups"><i class="fa fa-check"></i><b>12.2.2</b> types of grown-ups</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#dates"><i class="fa fa-check"></i><b>12.3</b> dates</a></li>
<li class="chapter" data-level="12.4" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#times"><i class="fa fa-check"></i><b>12.4</b> times</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i><b>13</b> lists</a></li>
<li class="chapter" data-level="14" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html"><i class="fa fa-check"></i><b>14</b> loops, functions, and beyond</a>
<ul>
<li class="chapter" data-level="14.1" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#loops"><i class="fa fa-check"></i><b>14.1</b> loops</a></li>
<li class="chapter" data-level="14.2" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#from-loop-to-apply-to-purrrmap"><i class="fa fa-check"></i><b>14.2</b> from loop to apply to purrr::map</a></li>
<li class="chapter" data-level="14.3" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#some-examples-of-functions"><i class="fa fa-check"></i><b>14.3</b> some examples of functions</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#preliminaries"><i class="fa fa-check"></i><b>14.3.1</b> preliminaries</a></li>
<li class="chapter" data-level="14.3.2" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#the-function"><i class="fa fa-check"></i><b>14.3.2</b> the function</a></li>
<li class="chapter" data-level="14.3.3" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#applying-the-function"><i class="fa fa-check"></i><b>14.3.3</b> applying the function</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#how-many-bottles-of-what"><i class="fa fa-check"></i><b>14.4</b> how many bottles of what?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data science for the liberal arts</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="loops-functions-and-beyond" class="section level1" number="14">
<h1><span class="header-section-number">14</span> loops, functions, and beyond</h1>
<p>In one of the most important contemporary theoretical models of intelligence, <span class="citation">(<a href="references.html#ref-sternberg1999" role="doc-biblioref">Sternberg 1999</a>)</span> has argued that the ability to automatize, that is, to work efficiently on repeated or habitual tasks, is a key component of intelligent behavior. Solving habitual problems efficiently - whether it is making a cup of coffee, finding the shortest path to complete a shopping list in a supermarket or a series of errands across town - allows us to focus our limited resources on other challenging tasks that, in turn, may determine whether we survive, or at least prosper.</p>
<p>In programming, loops and functions are essential tools for making repetitive tasks simple. Simplifying your code is one of the more intellectually satisfying aspects of working in R or in any programming language.</p>
<p>In R, loops are supplemented by additional tools for simplifying and avoiding repetition in code, including the ‘apply’ family and the map function in purrr. Functions (and, beyond this, custom libraries) can further streamline your work.</p>
<div id="loops" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> loops</h2>
<p>Consider the task of printing out a series of numbers. Here’s a simple example of how this could be done in a loop in R. It prints numbers between 1995 and 1998 (inclusive).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="loops-functions-and-beyond.html#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">message =</span> <span class="cn">FALSE</span>, <span class="at">warning =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-2"><a href="loops-functions-and-beyond.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-3"><a href="loops-functions-and-beyond.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.3     v purrr   0.3.4
## v tibble  3.1.0     v dplyr   1.0.5
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter()     masks stats::filter()
## x dplyr::group_rows() masks kableExtra::group_rows()
## x dplyr::lag()        masks stats::lag()</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="loops-functions-and-beyond.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb5-2"><a href="loops-functions-and-beyond.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="loops-functions-and-beyond.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1995</span><span class="sc">:</span><span class="dv">1998</span>) { <span class="co"># i is an index code</span></span>
<span id="cb5-4"><a href="loops-functions-and-beyond.html#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(i) <span class="co"># print the ith value in the sequence </span></span>
<span id="cb5-5"><a href="loops-functions-and-beyond.html#cb5-5" aria-hidden="true" tabindex="-1"></a>} <span class="co"># go to the next one until the range is complete</span></span></code></pre></div>
<pre><code>## [1] 1995
## [1] 1996
## [1] 1997
## [1] 1998</code></pre>
<p>Let’s expand on this a little, connecting back to the babynames data. This will print counts of the number of babies for each year in GenerationZ, which includes years from 1995-2015.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="loops-functions-and-beyond.html#cb7-1" aria-hidden="true" tabindex="-1"></a>genZ <span class="ot">&lt;-</span> (<span class="dv">1995</span><span class="sc">:</span><span class="dv">2015</span>)</span>
<span id="cb7-2"><a href="loops-functions-and-beyond.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this reduces the (big) babynames to a simple file of years and counts</span></span>
<span id="cb7-3"><a href="loops-functions-and-beyond.html#cb7-3" aria-hidden="true" tabindex="-1"></a>babyCounts <span class="ot">&lt;-</span></span>
<span id="cb7-4"><a href="loops-functions-and-beyond.html#cb7-4" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="loops-functions-and-beyond.html#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="loops-functions-and-beyond.html#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> genZ) <span class="sc">%&gt;%</span> </span>
<span id="cb7-7"><a href="loops-functions-and-beyond.html#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">nbabies =</span> <span class="fu">sum</span>(n))</span>
<span id="cb7-8"><a href="loops-functions-and-beyond.html#cb7-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-9"><a href="loops-functions-and-beyond.html#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># and this uses a for loop to print each row in turn</span></span>
<span id="cb7-10"><a href="loops-functions-and-beyond.html#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(babyCounts))) { </span>
<span id="cb7-11"><a href="loops-functions-and-beyond.html#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># filename[i,j] == ith row and jth column</span></span>
<span id="cb7-12"><a href="loops-functions-and-beyond.html#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>((babyCounts[i,<span class="dv">1</span>]), babyCounts[i,<span class="dv">2</span>]))</span>
<span id="cb7-13"><a href="loops-functions-and-beyond.html#cb7-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1995 3661351&quot;
## [1] &quot;1996 3646362&quot;
## [1] &quot;1997 3624799&quot;
## [1] &quot;1998 3677107&quot;
## [1] &quot;1999 3692537&quot;
## [1] &quot;2000 3778079&quot;
## [1] &quot;2001 3741451&quot;
## [1] &quot;2002 3736042&quot;
## [1] &quot;2003 3799971&quot;
## [1] &quot;2004 3818361&quot;
## [1] &quot;2005 3842004&quot;
## [1] &quot;2006 3952932&quot;
## [1] &quot;2007 3994007&quot;
## [1] &quot;2008 3926358&quot;
## [1] &quot;2009 3815638&quot;
## [1] &quot;2010 3690700&quot;
## [1] &quot;2011 3651914&quot;
## [1] &quot;2012 3650462&quot;
## [1] &quot;2013 3637310&quot;
## [1] &quot;2014 3696311&quot;
## [1] &quot;2015 3688687&quot;</code></pre>
<p>The syntax of loops, including where to put parentheses in index statements, can be tricky. Expect to refer to Google and StackExchange often in order to get your code running.</p>
<p>Another good source is Chapter 21 of R4DS. There, Wickham goes in to additional detail, including a description of seq_along(df) as a tool for creating an index corresponding to 1:ncol(df). Here’s an example with the diamonds dataset:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="loops-functions-and-beyond.html#cb9-1" aria-hidden="true" tabindex="-1"></a>diamonds2 <span class="ot">&lt;-</span> diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="loops-functions-and-beyond.html#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select_if</span>(., is.numeric)</span>
<span id="cb9-3"><a href="loops-functions-and-beyond.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for (i in (1:ncol(diamonds2))) {</span></span>
<span id="cb9-4"><a href="loops-functions-and-beyond.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(diamonds2)) {</span>
<span id="cb9-5"><a href="loops-functions-and-beyond.html#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="fu">names</span>(diamonds2[i]),</span>
<span id="cb9-6"><a href="loops-functions-and-beyond.html#cb9-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">round</span>(<span class="fu">mean</span>(diamonds2[[i]]),<span class="dv">2</span>)))</span>
<span id="cb9-7"><a href="loops-functions-and-beyond.html#cb9-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;carat 0.8&quot;
## [1] &quot;depth 61.75&quot;
## [1] &quot;table 57.46&quot;
## [1] &quot;price 3932.8&quot;
## [1] &quot;x 5.73&quot;
## [1] &quot;y 5.73&quot;
## [1] &quot;z 3.54&quot;</code></pre>
<p>Chapter 21 of R4DS also considers some extensions to related problems such as loops of indefinite length, which can often be addressed using the ‘<em>while</em>’ command.</p>
</div>
<div id="from-loop-to-apply-to-purrrmap" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> from loop to apply to purrr::map</h2>
<p>Understanding for loops is fundamental in programming, but in R they should often be sidestepped. If the order of iteration isn’t important (if, for example, it doesn’t matter which of the diamonds variables we take the mean of first), then using one of the measures from the <strong>apply</strong> family can generally be used to make your code simpler and more efficient.</p>
<p>The logic is that one takes a dataframe (df or tibble), then applies a function to its rows or columns:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="loops-functions-and-beyond.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># apply = apply the function (mean) to the columns(2) of the df </span></span>
<span id="cb11-2"><a href="loops-functions-and-beyond.html#cb11-2" aria-hidden="true" tabindex="-1"></a>diamonds2  <span class="sc">%&gt;%</span> <span class="fu">apply</span>(<span class="dv">2</span>,mean) </span></code></pre></div>
<pre><code>##        carat        depth        table        price            x            y 
##    0.7979397   61.7494049   57.4571839 3932.7997219    5.7311572    5.7345260 
##            z 
##    3.5387338</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="loops-functions-and-beyond.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sapply = simply apply - guesses that you are looking for col. means</span></span>
<span id="cb13-2"><a href="loops-functions-and-beyond.html#cb13-2" aria-hidden="true" tabindex="-1"></a>diamonds2  <span class="sc">%&gt;%</span> <span class="fu">sapply</span>(mean) </span></code></pre></div>
<pre><code>##        carat        depth        table        price            x            y 
##    0.7979397   61.7494049   57.4571839 3932.7997219    5.7311572    5.7345260 
##            z 
##    3.5387338</code></pre>
<p>The many variants of the apply family, including lapply [list apply] and tapply [table apply] as well as sapply, each have their own uses and can be quite efficient but, again, can be syntactically challenging.</p>
<p>In the evolving tidyverse, the <strong>map</strong> family of commands is supplementing if not supplanting apply; these commands (part of the purrr package in the core tidyverse) may prove to be more convenient and clear. For example, the <strong>map_df</strong> function will apply a function and return a dataframe (tibble), which can be handy for further analysis.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="loops-functions-and-beyond.html#cb15-1" aria-hidden="true" tabindex="-1"></a>diamonds2 <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="loops-functions-and-beyond.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(mean)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 7
##   carat depth table price     x     y     z
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 0.798  61.7  57.5 3933.  5.73  5.73  3.54</code></pre>
</div>
<div id="some-examples-of-functions" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> some examples of functions</h2>
<p>If you repeat a series of lines of code several times in your program, it is often best to wrap this into a function.</p>
<p>The first example is from a preregistered study I recently started of language and politics. For the preregistration, I ran analyses using <strong>simulated data,</strong> both to increase the likelihood that the code will run without error on real data and to help anticipate the analyses which are to be run on ‘real’ data. I began by getting a real body of text from the net and scrambling it, then constructing fake ‘Republican’ and ‘Democratic’ texts from this. Here, I illustrate this by constructing 50 sample documents, each consisting of between 5 and 20 words.</p>
<p>The project is given in four steps:</p>
<div id="preliminaries" class="section level3" number="14.3.1">
<h3><span class="header-section-number">14.3.1</span> preliminaries</h3>
<p>Here is the preliminary stuff, where I pull the data off the net and initialize the variables</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="loops-functions-and-beyond.html#cb17-1" aria-hidden="true" tabindex="-1"></a>sampledata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">url</span>(</span>
<span id="cb17-2"><a href="loops-functions-and-beyond.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">#      &quot;https://www.crowdflower.com/wp-content/uploads/2016/03/sentiment-words-DFE-785960.csv&quot;))</span></span>
<span id="cb17-3"><a href="loops-functions-and-beyond.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;https://raw.githubusercontent.com/totalgood/hope/master/data/corpora/sentiment-words-DFE-785960.csv&quot;</span>))</span>
<span id="cb17-4"><a href="loops-functions-and-beyond.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pulls off four words</span></span>
<span id="cb17-5"><a href="loops-functions-and-beyond.html#cb17-5" aria-hidden="true" tabindex="-1"></a>sampledata <span class="ot">&lt;-</span> sampledata[<span class="dv">22</span><span class="sc">:</span><span class="dv">25</span>] <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>()</span>
<span id="cb17-6"><a href="loops-functions-and-beyond.html#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="loops-functions-and-beyond.html#cb17-7" aria-hidden="true" tabindex="-1"></a>ndocs <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb17-8"><a href="loops-functions-and-beyond.html#cb17-8" aria-hidden="true" tabindex="-1"></a>minDocLength <span class="ot">&lt;-</span>  <span class="dv">5</span></span>
<span id="cb17-9"><a href="loops-functions-and-beyond.html#cb17-9" aria-hidden="true" tabindex="-1"></a>maxDocLength <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb17-10"><a href="loops-functions-and-beyond.html#cb17-10" aria-hidden="true" tabindex="-1"></a>doc <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;character&quot;</span>, <span class="at">length =</span> ndocs)</span></code></pre></div>
</div>
<div id="the-function" class="section level3" number="14.3.2">
<h3><span class="header-section-number">14.3.2</span> the function</h3>
<p>Here’s the simple function which pulls a random word out of the matrix of sampledata.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="loops-functions-and-beyond.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">33458</span>) <span class="co"># a random seed is used to allow reproducible results</span></span>
<span id="cb18-2"><a href="loops-functions-and-beyond.html#cb18-2" aria-hidden="true" tabindex="-1"></a>getword <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb18-3"><a href="loops-functions-and-beyond.html#cb18-3" aria-hidden="true" tabindex="-1"></a>      rowid <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(sampledata), <span class="dv">1</span>)</span>
<span id="cb18-4"><a href="loops-functions-and-beyond.html#cb18-4" aria-hidden="true" tabindex="-1"></a>      colid <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(sampledata), <span class="dv">1</span>)</span>
<span id="cb18-5"><a href="loops-functions-and-beyond.html#cb18-5" aria-hidden="true" tabindex="-1"></a>      sampledata[rowid,colid]</span>
<span id="cb18-6"><a href="loops-functions-and-beyond.html#cb18-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="applying-the-function" class="section level3" number="14.3.3">
<h3><span class="header-section-number">14.3.3</span> applying the function</h3>
<p>The function is applied, first, to extract one word, then, in successive loops, to build up one phrase and then many.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="loops-functions-and-beyond.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine words into docs</span></span>
<span id="cb19-2"><a href="loops-functions-and-beyond.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># establish length of first phrase</span></span>
<span id="cb19-3"><a href="loops-functions-and-beyond.html#cb19-3" aria-hidden="true" tabindex="-1"></a>docLength <span class="ot">&lt;-</span> <span class="fu">sample</span>(minDocLength<span class="sc">:</span>maxDocLength,<span class="dv">1</span>)</span>
<span id="cb19-4"><a href="loops-functions-and-beyond.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># initialize with one word</span></span>
<span id="cb19-5"><a href="loops-functions-and-beyond.html#cb19-5" aria-hidden="true" tabindex="-1"></a>sampleCorpus <span class="ot">&lt;-</span> <span class="fu">getword</span>()</span>
<span id="cb19-6"><a href="loops-functions-and-beyond.html#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># loop to build up first phrase</span></span>
<span id="cb19-7"><a href="loops-functions-and-beyond.html#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>docLength) {</span>
<span id="cb19-8"><a href="loops-functions-and-beyond.html#cb19-8" aria-hidden="true" tabindex="-1"></a>      addWord <span class="ot">&lt;-</span> <span class="fu">getword</span>()</span>
<span id="cb19-9"><a href="loops-functions-and-beyond.html#cb19-9" aria-hidden="true" tabindex="-1"></a>      sampleCorpus <span class="ot">&lt;-</span> <span class="fu">paste</span>(sampleCorpus, addWord)</span>
<span id="cb19-10"><a href="loops-functions-and-beyond.html#cb19-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-11"><a href="loops-functions-and-beyond.html#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#add additional simulated documents</span></span>
<span id="cb19-12"><a href="loops-functions-and-beyond.html#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>ndocs) {</span>
<span id="cb19-13"><a href="loops-functions-and-beyond.html#cb19-13" aria-hidden="true" tabindex="-1"></a>      docLength <span class="ot">&lt;-</span> <span class="fu">sample</span>(minDocLength<span class="sc">:</span>maxDocLength,<span class="dv">1</span>)</span>
<span id="cb19-14"><a href="loops-functions-and-beyond.html#cb19-14" aria-hidden="true" tabindex="-1"></a>      newdoc <span class="ot">&lt;-</span> <span class="fu">getword</span>()</span>
<span id="cb19-15"><a href="loops-functions-and-beyond.html#cb19-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>docLength <span class="sc">-</span> <span class="dv">1</span>) {</span>
<span id="cb19-16"><a href="loops-functions-and-beyond.html#cb19-16" aria-hidden="true" tabindex="-1"></a>            addWord <span class="ot">&lt;-</span> <span class="fu">getword</span>()</span>
<span id="cb19-17"><a href="loops-functions-and-beyond.html#cb19-17" aria-hidden="true" tabindex="-1"></a>            newdoc <span class="ot">&lt;-</span> <span class="fu">paste</span>(newdoc, addWord)</span>
<span id="cb19-18"><a href="loops-functions-and-beyond.html#cb19-18" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb19-19"><a href="loops-functions-and-beyond.html#cb19-19" aria-hidden="true" tabindex="-1"></a>      sampleCorpus <span class="ot">&lt;-</span> <span class="fu">rbind</span>(newdoc,sampleCorpus)</span>
<span id="cb19-20"><a href="loops-functions-and-beyond.html#cb19-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Finally, the results are combined with a vector of alternating labels of ‘Dem’ and ‘Rep’:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="loops-functions-and-beyond.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(sampleCorpus) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb20-2"><a href="loops-functions-and-beyond.html#cb20-2" aria-hidden="true" tabindex="-1"></a>evenOdd <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Dem&quot;</span>,<span class="st">&quot;Rep&quot;</span>),<span class="at">length.out =</span> <span class="fu">nrow</span>(sampleCorpus))</span>
<span id="cb20-3"><a href="loops-functions-and-beyond.html#cb20-3" aria-hidden="true" tabindex="-1"></a>workingCorpus <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">cbind</span>(evenOdd,sampleCorpus))</span>
<span id="cb20-4"><a href="loops-functions-and-beyond.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(workingCorpus,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   evenOdd V2                                                                    
##   &lt;chr&gt;   &lt;chr&gt;                                                                 
## 1 Dem     wild at heart nobody loves me lost art miss the sun need a doctor kin~
## 2 Rep     great player awfully nice back hurts not paying pretty rubbish found ~
## 3 Dem     yahooo make no promises horrible daughter ew crazy evening fit        
## 4 Rep     can&#39;t sleep lazy afternoon sucks #fedup great shame positive break fa~
## 5 Dem     problems nice funniest hurt not necessarily sad nose eat no problem d~</code></pre>
</div>
</div>
<div id="how-many-bottles-of-what" class="section level2" number="14.4">
<h2><span class="header-section-number">14.4</span> how many bottles of what?</h2>
<p>To put the fun back into function, here’s a solution to the “99 bottles of beer” function described in r4DS 21.2.1. Study the code. Ask or answer a question about it in class or on Slack.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="loops-functions-and-beyond.html#cb22-1" aria-hidden="true" tabindex="-1"></a>beerSong <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">liquid =</span> <span class="st">&quot;beer&quot;</span>, <span class="at">count =</span> <span class="dv">99</span>, <span class="at">surface =</span> <span class="st">&quot;wall&quot;</span>) {</span>
<span id="cb22-2"><a href="loops-functions-and-beyond.html#cb22-2" aria-hidden="true" tabindex="-1"></a>    songtext <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span> </span>
<span id="cb22-3"><a href="loops-functions-and-beyond.html#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> (count<span class="sc">:</span><span class="dv">1</span>)) { </span>
<span id="cb22-4"><a href="loops-functions-and-beyond.html#cb22-4" aria-hidden="true" tabindex="-1"></a>        thisLine <span class="ot">=</span> (<span class="fu">paste0</span>(i, <span class="st">&quot; bottles of &quot;</span>, liquid, </span>
<span id="cb22-5"><a href="loops-functions-and-beyond.html#cb22-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot; on the &quot;</span>, surface,</span>
<span id="cb22-6"><a href="loops-functions-and-beyond.html#cb22-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;, you take one down and pass it around,</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb22-7"><a href="loops-functions-and-beyond.html#cb22-7" aria-hidden="true" tabindex="-1"></a>        songtext <span class="ot">=</span> <span class="fu">c</span>(songtext, thisLine)</span>
<span id="cb22-8"><a href="loops-functions-and-beyond.html#cb22-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb22-9"><a href="loops-functions-and-beyond.html#cb22-9" aria-hidden="true" tabindex="-1"></a>    songtext <span class="ot">=</span> <span class="fu">c</span>(songtext, </span>
<span id="cb22-10"><a href="loops-functions-and-beyond.html#cb22-10" aria-hidden="true" tabindex="-1"></a>                 (<span class="fu">paste0</span>(<span class="st">&quot;no more bottles of &quot;</span>,</span>
<span id="cb22-11"><a href="loops-functions-and-beyond.html#cb22-11" aria-hidden="true" tabindex="-1"></a>                         liquid,<span class="st">&quot; on the &quot;</span>, surface,<span class="st">&quot;...&quot;</span>)))</span>
<span id="cb22-12"><a href="loops-functions-and-beyond.html#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(songtext) <span class="co"># cat prints without line numbers</span></span>
<span id="cb22-13"><a href="loops-functions-and-beyond.html#cb22-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-14"><a href="loops-functions-and-beyond.html#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co">#beerSong() </span></span></code></pre></div>
<p>And here are solutions proposed by some of your classmates over the last few years. How do they differ from each other, and from the solution given above?</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="loops-functions-and-beyond.html#cb23-1" aria-hidden="true" tabindex="-1"></a>beersng <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb23-2"><a href="loops-functions-and-beyond.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb23-3"><a href="loops-functions-and-beyond.html#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,n,<span class="st">&quot; bottle of beer on the wall, &quot;</span>,n,</span>
<span id="cb23-4"><a href="loops-functions-and-beyond.html#cb23-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot; bottles of beer.</span><span class="sc">\n</span><span class="st">Take one down and pass it around,&quot;</span>,</span>
<span id="cb23-5"><a href="loops-functions-and-beyond.html#cb23-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot; no more bottles of beer on the wall.</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb23-6"><a href="loops-functions-and-beyond.html#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">No more bottles of beer on the wall, </span></span>
<span id="cb23-7"><a href="loops-functions-and-beyond.html#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="st">        no more bottles of beer.</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb23-8"><a href="loops-functions-and-beyond.html#cb23-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Go to the store and buy some more, </span></span>
<span id="cb23-9"><a href="loops-functions-and-beyond.html#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="st">        99 bottles of beer on the wall.</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb23-10"><a href="loops-functions-and-beyond.html#cb23-10" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb23-11"><a href="loops-functions-and-beyond.html#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,n,<span class="st">&quot; bottles of beer on the wall, &quot;</span>,n,</span>
<span id="cb23-12"><a href="loops-functions-and-beyond.html#cb23-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot; bottles of beer.</span><span class="sc">\n</span><span class="st">Take one down and pass it around, &quot;</span>,</span>
<span id="cb23-13"><a href="loops-functions-and-beyond.html#cb23-13" aria-hidden="true" tabindex="-1"></a>        n<span class="dv">-1</span>, <span class="st">&quot; more bottles of beer on the wall.</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb23-14"><a href="loops-functions-and-beyond.html#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">beersng</span>(n<span class="dv">-1</span>))</span>
<span id="cb23-15"><a href="loops-functions-and-beyond.html#cb23-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-16"><a href="loops-functions-and-beyond.html#cb23-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-17"><a href="loops-functions-and-beyond.html#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co">#beersng(99)</span></span>
<span id="cb23-18"><a href="loops-functions-and-beyond.html#cb23-18" aria-hidden="true" tabindex="-1"></a>moreBeer <span class="ot">&lt;-</span> <span class="cf">function</span> () {</span>
<span id="cb23-19"><a href="loops-functions-and-beyond.html#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">100</span>){</span>
<span id="cb23-20"><a href="loops-functions-and-beyond.html#cb23-20" aria-hidden="true" tabindex="-1"></a>  starting_number <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb23-21"><a href="loops-functions-and-beyond.html#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (starting_number <span class="sc">-</span> i <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb23-22"><a href="loops-functions-and-beyond.html#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;No more bottles of beer on the wall, </span></span>
<span id="cb23-23"><a href="loops-functions-and-beyond.html#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="st">          no more bottles of beer, </span></span>
<span id="cb23-24"><a href="loops-functions-and-beyond.html#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="st">          Go to the store and buy some more, </span></span>
<span id="cb23-25"><a href="loops-functions-and-beyond.html#cb23-25" aria-hidden="true" tabindex="-1"></a><span class="st">          99 bottles of beer on the wall.&quot;</span>)</span>
<span id="cb23-26"><a href="loops-functions-and-beyond.html#cb23-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb23-27"><a href="loops-functions-and-beyond.html#cb23-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-28"><a href="loops-functions-and-beyond.html#cb23-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(starting_number <span class="sc">-</span> i,</span>
<span id="cb23-29"><a href="loops-functions-and-beyond.html#cb23-29" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;bottles of beer on the wall&quot;</span>,</span>
<span id="cb23-30"><a href="loops-functions-and-beyond.html#cb23-30" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Take one down and pass it around,&quot;</span>,</span>
<span id="cb23-31"><a href="loops-functions-and-beyond.html#cb23-31" aria-hidden="true" tabindex="-1"></a>              starting_number <span class="sc">-</span> i <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb23-32"><a href="loops-functions-and-beyond.html#cb23-32" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;bottles of beer on the wall.&quot;</span>))</span>
<span id="cb23-33"><a href="loops-functions-and-beyond.html#cb23-33" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-34"><a href="loops-functions-and-beyond.html#cb23-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-35"><a href="loops-functions-and-beyond.html#cb23-35" aria-hidden="true" tabindex="-1"></a><span class="co"># moreBeer()</span></span>
<span id="cb23-36"><a href="loops-functions-and-beyond.html#cb23-36" aria-hidden="true" tabindex="-1"></a>song <span class="ot">&lt;-</span> <span class="cf">function</span>(bottlesofbeer){</span>
<span id="cb23-37"><a href="loops-functions-and-beyond.html#cb23-37" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> bottlesofbeer<span class="sc">:</span><span class="dv">1</span>){ </span>
<span id="cb23-38"><a href="loops-functions-and-beyond.html#cb23-38" aria-hidden="true" tabindex="-1"></a>     <span class="fu">cat</span>(bottlesofbeer,<span class="st">&quot; bottles of beer on the wall </span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb23-39"><a href="loops-functions-and-beyond.html#cb23-39" aria-hidden="true" tabindex="-1"></a>        bottlesofbeer,<span class="st">&quot; bottles of beer </span><span class="sc">\n</span><span class="st">Take one down, </span></span>
<span id="cb23-40"><a href="loops-functions-and-beyond.html#cb23-40" aria-hidden="true" tabindex="-1"></a><span class="st">        pass it around </span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb23-41"><a href="loops-functions-and-beyond.html#cb23-41" aria-hidden="true" tabindex="-1"></a>        bottlesofbeer<span class="dv">-1</span>, <span class="st">&quot; bottles of beer on the wall </span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot; </span><span class="sc">\n</span><span class="st">&quot;</span>)       </span>
<span id="cb23-42"><a href="loops-functions-and-beyond.html#cb23-42" aria-hidden="true" tabindex="-1"></a>        bottlesofbeer <span class="ot">=</span> bottlesofbeer <span class="sc">-</span> <span class="dv">1</span> </span>
<span id="cb23-43"><a href="loops-functions-and-beyond.html#cb23-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-44"><a href="loops-functions-and-beyond.html#cb23-44" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-45"><a href="loops-functions-and-beyond.html#cb23-45" aria-hidden="true" tabindex="-1"></a><span class="co">#song(99)</span></span></code></pre></div>
<p>Which code is ‘best?’ Good code is clear, but it is also efficient. We probably shouldn’t expect much in the way of differences between these functions in terms of speed (as each includes 99 iterations of a simple print command), but here’s a simple way to compare. Note that I’ve used the “sink” command to write my output to files rather than consoles:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="loops-functions-and-beyond.html#cb24-1" aria-hidden="true" tabindex="-1"></a>start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb24-2"><a href="loops-functions-and-beyond.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span> (<span class="at">file =</span> <span class="st">&quot;f1.txt&quot;</span>)</span>
<span id="cb24-3"><a href="loops-functions-and-beyond.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">beerSong</span>(<span class="st">&quot;beer&quot;</span>,<span class="dv">99</span>)</span>
<span id="cb24-4"><a href="loops-functions-and-beyond.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span>()</span>
<span id="cb24-5"><a href="loops-functions-and-beyond.html#cb24-5" aria-hidden="true" tabindex="-1"></a>end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb24-6"><a href="loops-functions-and-beyond.html#cb24-6" aria-hidden="true" tabindex="-1"></a>beerSongtime <span class="ot">&lt;-</span> end_time <span class="sc">-</span> start_time</span>
<span id="cb24-7"><a href="loops-functions-and-beyond.html#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="loops-functions-and-beyond.html#cb24-8" aria-hidden="true" tabindex="-1"></a>start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb24-9"><a href="loops-functions-and-beyond.html#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span> (<span class="at">file =</span> <span class="st">&quot;f2.txt&quot;</span>)</span>
<span id="cb24-10"><a href="loops-functions-and-beyond.html#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">beersng</span>(<span class="dv">99</span>)</span>
<span id="cb24-11"><a href="loops-functions-and-beyond.html#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span>()</span>
<span id="cb24-12"><a href="loops-functions-and-beyond.html#cb24-12" aria-hidden="true" tabindex="-1"></a>end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb24-13"><a href="loops-functions-and-beyond.html#cb24-13" aria-hidden="true" tabindex="-1"></a>beersngtime <span class="ot">&lt;-</span> end_time <span class="sc">-</span> start_time</span>
<span id="cb24-14"><a href="loops-functions-and-beyond.html#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="loops-functions-and-beyond.html#cb24-15" aria-hidden="true" tabindex="-1"></a>start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb24-16"><a href="loops-functions-and-beyond.html#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span> (<span class="at">file =</span> <span class="st">&quot;f3.txt&quot;</span>)</span>
<span id="cb24-17"><a href="loops-functions-and-beyond.html#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="fu">song</span>(<span class="dv">99</span>)</span>
<span id="cb24-18"><a href="loops-functions-and-beyond.html#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span>()</span>
<span id="cb24-19"><a href="loops-functions-and-beyond.html#cb24-19" aria-hidden="true" tabindex="-1"></a>end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb24-20"><a href="loops-functions-and-beyond.html#cb24-20" aria-hidden="true" tabindex="-1"></a>songtime <span class="ot">&lt;-</span> end_time <span class="sc">-</span> start_time</span>
<span id="cb24-21"><a href="loops-functions-and-beyond.html#cb24-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-22"><a href="loops-functions-and-beyond.html#cb24-22" aria-hidden="true" tabindex="-1"></a>start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb24-23"><a href="loops-functions-and-beyond.html#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span> (<span class="at">file =</span> <span class="st">&quot;f4.txt&quot;</span>)</span>
<span id="cb24-24"><a href="loops-functions-and-beyond.html#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="fu">moreBeer</span>()</span>
<span id="cb24-25"><a href="loops-functions-and-beyond.html#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span>()</span>
<span id="cb24-26"><a href="loops-functions-and-beyond.html#cb24-26" aria-hidden="true" tabindex="-1"></a>end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb24-27"><a href="loops-functions-and-beyond.html#cb24-27" aria-hidden="true" tabindex="-1"></a>moreBeertime <span class="ot">&lt;-</span> end_time <span class="sc">-</span> start_time</span></code></pre></div>
<p>Here is the first line of output from each function, together with table showing the elapsed times:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="loops-functions-and-beyond.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(<span class="st">&quot;f1.txt&quot;</span>,<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="loops-functions-and-beyond.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(<span class="st">&quot;f2.txt&quot;</span>,<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="loops-functions-and-beyond.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(<span class="st">&quot;f3.txt&quot;</span>,<span class="dv">4</span>)</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="loops-functions-and-beyond.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(<span class="st">&quot;f4.txt&quot;</span>,<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="loops-functions-and-beyond.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">functionName =</span> <span class="fu">c</span>(<span class="st">&quot;beerSongtime&quot;</span>,</span>
<span id="cb33-2"><a href="loops-functions-and-beyond.html#cb33-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;beersngtime&quot;</span>,</span>
<span id="cb33-3"><a href="loops-functions-and-beyond.html#cb33-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;songtime&quot;</span>,</span>
<span id="cb33-4"><a href="loops-functions-and-beyond.html#cb33-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;moreBeertime&quot;</span>), <span class="at">time =</span></span>
<span id="cb33-5"><a href="loops-functions-and-beyond.html#cb33-5" aria-hidden="true" tabindex="-1"></a>             <span class="fu">c</span>(beerSongtime,beersngtime,</span>
<span id="cb33-6"><a href="loops-functions-and-beyond.html#cb33-6" aria-hidden="true" tabindex="-1"></a>           songtime,</span>
<span id="cb33-7"><a href="loops-functions-and-beyond.html#cb33-7" aria-hidden="true" tabindex="-1"></a>           moreBeertime)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-8"><a href="loops-functions-and-beyond.html#cb33-8" aria-hidden="true" tabindex="-1"></a>          <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
functionName
</th>
<th style="text-align:left;">
time
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
beerSongtime
</td>
<td style="text-align:left;">
0.06 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
beersngtime
</td>
<td style="text-align:left;">
0.05 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
songtime
</td>
<td style="text-align:left;">
0.06 secs
</td>
</tr>
<tr>
<td style="text-align:left;">
moreBeertime
</td>
<td style="text-align:left;">
0.05 secs
</td>
</tr>
</tbody>
</table>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lists.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "sepia",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
