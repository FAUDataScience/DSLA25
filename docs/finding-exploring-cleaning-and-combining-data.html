<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>12 finding, exploring, cleaning, and combining data | Data science for the liberal arts</title>
  <meta name="description" content="12 finding, exploring, cleaning, and combining data | Data science for the liberal arts" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="12 finding, exploring, cleaning, and combining data | Data science for the liberal arts" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="kevinlanning/DSLA25" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="12 finding, exploring, cleaning, and combining data | Data science for the liberal arts" />
  
  
  

<meta name="author" content="Kevin Lanning" />


<meta name="date" content="2025-04-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="wrangling-and-tidying.html"/>
<link rel="next" href="applied-data-science.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>preface</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#the-role-of-the-liberal-arts-in-data-science"><i class="fa fa-check"></i>the role of the liberal arts in data science</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#some-features-of-the-text"><i class="fa fa-check"></i>some features of the text</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#the-book-is-for-you"><i class="fa fa-check"></i>the book is for you</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-i-introduction.html"><a href="part-i-introduction.html"><i class="fa fa-check"></i>PART I: Introduction</a></li>
<li class="chapter" data-level="1" data-path="what-is-data-science-for-the-liberal-arts.html"><a href="what-is-data-science-for-the-liberal-arts.html"><i class="fa fa-check"></i><b>1</b> what is “data science for the liberal arts?”</a>
<ul>
<li class="chapter" data-level="1.1" data-path="what-is-data-science-for-the-liberal-arts.html"><a href="what-is-data-science-for-the-liberal-arts.html#the-incompleteness-of-the-data-science-venn-diagram"><i class="fa fa-check"></i><b>1.1</b> the incompleteness of the data science Venn diagram</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="what-is-data-science-for-the-liberal-arts.html"><a href="what-is-data-science-for-the-liberal-arts.html#additional-domains"><i class="fa fa-check"></i><b>1.1.1</b> additional domains</a></li>
<li class="chapter" data-level="1.1.2" data-path="what-is-data-science-for-the-liberal-arts.html"><a href="what-is-data-science-for-the-liberal-arts.html#an-additional-dimension"><i class="fa fa-check"></i><b>1.1.2</b> an additional dimension</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="what-is-data-science-for-the-liberal-arts.html"><a href="what-is-data-science-for-the-liberal-arts.html#the-importance-of-data-science-for-society"><i class="fa fa-check"></i><b>1.2</b> the importance of data science for society</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="what-is-data-science-for-the-liberal-arts.html"><a href="what-is-data-science-for-the-liberal-arts.html#training-in-the-liberal-arts---success-in-tech"><i class="fa fa-check"></i><b>1.2.1</b> training in the liberal arts -&gt; success in tech</a></li>
<li class="chapter" data-level="1.2.2" data-path="what-is-data-science-for-the-liberal-arts.html"><a href="what-is-data-science-for-the-liberal-arts.html#the-challenge-of-tmi"><i class="fa fa-check"></i><b>1.2.2</b> the challenge of TMI</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="what-is-data-science-for-the-liberal-arts.html"><a href="what-is-data-science-for-the-liberal-arts.html#discussion-what-are-your-objectives-in-data-science"><i class="fa fa-check"></i><b>1.3</b> discussion: what are your objectives in data science?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> getting started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#are-you-already-a-programmer-and-statistician"><i class="fa fa-check"></i><b>2.1</b> are you already a programmer and statistician?</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#spreadsheets---some-best-practices"><i class="fa fa-check"></i><b>2.2</b> spreadsheets - some best practices</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started.html"><a href="getting-started.html#setting-up-your-machine-some-basic-tools"><i class="fa fa-check"></i><b>2.3</b> setting up your machine: some basic tools</a></li>
<li class="chapter" data-level="2.4" data-path="getting-started.html"><a href="getting-started.html#a-modified-15-minute-rule"><i class="fa fa-check"></i><b>2.4</b> a (modified) 15-minute rule</a></li>
<li class="chapter" data-level="2.5" data-path="getting-started.html"><a href="getting-started.html#installing-r-and-rstudio-desktop"><i class="fa fa-check"></i><b>2.5</b> installing R and RStudio desktop</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="what-r-stands-for.html"><a href="what-r-stands-for.html"><i class="fa fa-check"></i><b>3</b> what R stands for …</a>
<ul>
<li class="chapter" data-level="3.1" data-path="what-r-stands-for.html"><a href="what-r-stands-for.html#some-key-characteristics-of-r"><i class="fa fa-check"></i><b>3.1</b> some key characteristics of R</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="what-r-stands-for.html"><a href="what-r-stands-for.html#base-r-and-packages"><i class="fa fa-check"></i><b>3.1.1</b> base R and packages</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="what-r-stands-for.html"><a href="what-r-stands-for.html#cha-cha-cha-changes"><i class="fa fa-check"></i><b>3.2</b> cha-cha-cha-changes</a></li>
<li class="chapter" data-level="3.3" data-path="what-r-stands-for.html"><a href="what-r-stands-for.html#some-technical-characteristics"><i class="fa fa-check"></i><b>3.3</b> some technical characteristics</a></li>
<li class="chapter" data-level="3.4" data-path="what-r-stands-for.html"><a href="what-r-stands-for.html#finding-help"><i class="fa fa-check"></i><b>3.4</b> finding help</a></li>
<li class="chapter" data-level="3.5" data-path="what-r-stands-for.html"><a href="what-r-stands-for.html#wickham-and-r-for-data-science-2e"><i class="fa fa-check"></i><b>3.5</b> Wickham and R for Data Science 2e</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploring-r-world.html"><a href="exploring-r-world.html"><i class="fa fa-check"></i><b>4</b> exploring R world</a>
<ul>
<li class="chapter" data-level="4.1" data-path="exploring-r-world.html"><a href="exploring-r-world.html#go-to-the-movies"><i class="fa fa-check"></i><b>4.1</b> go to the movies</a></li>
<li class="chapter" data-level="4.2" data-path="exploring-r-world.html"><a href="exploring-r-world.html#go-into-the-clouds"><i class="fa fa-check"></i><b>4.2</b> go into the clouds</a></li>
<li class="chapter" data-level="4.3" data-path="exploring-r-world.html"><a href="exploring-r-world.html#open-the-box"><i class="fa fa-check"></i><b>4.3</b> open the box</a></li>
<li class="chapter" data-level="4.4" data-path="exploring-r-world.html"><a href="exploring-r-world.html#go-to-datacamp"><i class="fa fa-check"></i><b>4.4</b> go to (data)camp</a></li>
<li class="chapter" data-level="4.5" data-path="exploring-r-world.html"><a href="exploring-r-world.html#learn-to-knit"><i class="fa fa-check"></i><b>4.5</b> learn to knit</a></li>
<li class="chapter" data-level="4.6" data-path="exploring-r-world.html"><a href="exploring-r-world.html#older-approaches"><i class="fa fa-check"></i><b>4.6</b> older approaches</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="exploring-r-world.html"><a href="exploring-r-world.html#using-swirl"><i class="fa fa-check"></i><b>4.6.1</b> <strong>using Swirl</strong></a></li>
<li class="chapter" data-level="4.6.2" data-path="exploring-r-world.html"><a href="exploring-r-world.html#readingwatching-roger-pengs-text-andor-videos"><i class="fa fa-check"></i><b>4.6.2</b> reading/watching Roger Peng’s text and/or videos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-ii-towards-data-literacy.html"><a href="part-ii-towards-data-literacy.html"><i class="fa fa-check"></i>Part II: Towards data literacy</a></li>
<li class="chapter" data-level="5" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html"><i class="fa fa-check"></i><b>5</b> now draw the rest of the owl</a>
<ul>
<li class="chapter" data-level="5.1" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#time-for-hands-on-experience"><i class="fa fa-check"></i><b>5.1</b> time for hands-on experience</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#consider-loading-the-tidyverse"><i class="fa fa-check"></i><b>5.1.1</b> consider loading the tidyverse</a></li>
<li class="chapter" data-level="5.1.2" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#now-explore-the-babynames-package"><i class="fa fa-check"></i><b>5.1.2</b> now explore the babynames package</a></li>
<li class="chapter" data-level="5.1.3" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#or-the-ggplot2movies-package"><i class="fa fa-check"></i><b>5.1.3</b> or the (ggplot2)movies package</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="now-draw-the-rest-of-the-owl.html"><a href="now-draw-the-rest-of-the-owl.html#assignment"><i class="fa fa-check"></i><b>5.2</b> assignment</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="literate-programming.html"><a href="literate-programming.html"><i class="fa fa-check"></i><b>6</b> literate programming</a>
<ul>
<li class="chapter" data-level="6.1" data-path="literate-programming.html"><a href="literate-programming.html#projects-are-directories"><i class="fa fa-check"></i><b>6.1</b> projects are directories</a></li>
<li class="chapter" data-level="6.2" data-path="literate-programming.html"><a href="literate-programming.html#scripts-are-files-of-code"><i class="fa fa-check"></i><b>6.2</b> scripts are files of code</a></li>
<li class="chapter" data-level="6.3" data-path="literate-programming.html"><a href="literate-programming.html#r-markdown-quarto-documents-combine-scripts-with-comments-and-once-knit-results"><i class="fa fa-check"></i><b>6.3</b> R markdown / Quarto documents combine scripts with comments and (once knit) results</a></li>
<li class="chapter" data-level="6.4" data-path="literate-programming.html"><a href="literate-programming.html#some-elements-of-coding-style"><i class="fa fa-check"></i><b>6.4</b> some elements of coding style</a></li>
<li class="chapter" data-level="6.5" data-path="literate-programming.html"><a href="literate-programming.html#what-to-do-when-you-are-stuck"><i class="fa fa-check"></i><b>6.5</b> What to do when you are stuck</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html"><i class="fa fa-check"></i><b>7</b> principles of data visualization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#some-opening-thoughts"><i class="fa fa-check"></i><b>7.1</b> some opening thoughts</a></li>
<li class="chapter" data-level="7.2" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#some-early-graphs"><i class="fa fa-check"></i><b>7.2</b> some early graphs</a></li>
<li class="chapter" data-level="7.3" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#tukey-and-eda"><i class="fa fa-check"></i><b>7.3</b> Tukey and EDA</a></li>
<li class="chapter" data-level="7.4" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#approaches-to-graphs"><i class="fa fa-check"></i><b>7.4</b> approaches to graphs</a></li>
<li class="chapter" data-level="7.5" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#tufte-first-principles"><i class="fa fa-check"></i><b>7.5</b> Tufte: first principles</a></li>
<li class="chapter" data-level="7.6" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#the-politics-of-data-visualization"><i class="fa fa-check"></i><b>7.6</b> the politics of data visualization</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#poor-design-leads-to-an-uninformed-or-misinformed-world"><i class="fa fa-check"></i><b>7.6.1</b> poor design leads to an uninformed or misinformed world</a></li>
<li class="chapter" data-level="7.6.2" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#poor-design-can-be-a-tool-to-deceive"><i class="fa fa-check"></i><b>7.6.2</b> poor design can be a tool to deceive</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#the-psychology-of-data-visualization"><i class="fa fa-check"></i><b>7.7</b> the psychology of data visualization</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#the-power-of-animation"><i class="fa fa-check"></i><b>7.7.1</b> the power of animation</a></li>
<li class="chapter" data-level="7.7.2" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#telling-the-truth-when-the-truth-is-unclear"><i class="fa fa-check"></i><b>7.7.2</b> telling the truth when the truth is unclear</a></li>
<li class="chapter" data-level="7.7.3" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#visualizing-uncertainty"><i class="fa fa-check"></i><b>7.7.3</b> visualizing uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#exercises"><i class="fa fa-check"></i><b>7.8</b> exercises</a>
<ul>
<li class="chapter" data-level="" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#smartphone-sales"><i class="fa fa-check"></i>Smartphone sales</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#stand-your-ground"><i class="fa fa-check"></i>Stand your ground</a></li>
<li class="chapter" data-level="" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#big-businesses"><i class="fa fa-check"></i>Big businesses</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#further-reading-and-resources"><i class="fa fa-check"></i><b>7.9</b> further reading and resources</a></li>
<li class="chapter" data-level="7.10" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#addendum"><i class="fa fa-check"></i><b>7.10</b> addendum</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="principles-of-data-visualization.html"><a href="principles-of-data-visualization.html#some-notes-on-healy"><i class="fa fa-check"></i><b>7.10.1</b> some notes on Healy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="visualization-in-r-with-ggplot.html"><a href="visualization-in-r-with-ggplot.html"><i class="fa fa-check"></i><b>8</b> visualization in R with ggplot</a>
<ul>
<li class="chapter" data-level="8.1" data-path="visualization-in-r-with-ggplot.html"><a href="visualization-in-r-with-ggplot.html#a-picture-words-numbers"><i class="fa fa-check"></i><b>8.1</b> a picture &gt; (words, numbers)?</a></li>
<li class="chapter" data-level="8.2" data-path="visualization-in-r-with-ggplot.html"><a href="visualization-in-r-with-ggplot.html#read-wickhams-opening-chapter"><i class="fa fa-check"></i><b>8.2</b> Read Wickham’s opening chapter</a></li>
<li class="chapter" data-level="8.3" data-path="visualization-in-r-with-ggplot.html"><a href="visualization-in-r-with-ggplot.html#explore"><i class="fa fa-check"></i><b>8.3</b> explore</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html"><i class="fa fa-check"></i><b>9</b> on probability and statistics</a>
<ul>
<li class="chapter" data-level="9.1" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#on-probability"><i class="fa fa-check"></i><b>9.1</b> on probability</a></li>
<li class="chapter" data-level="9.2" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#the-rules-of-probability"><i class="fa fa-check"></i><b>9.2</b> the rules of probability</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#keeping-conditional-probabilities-straight"><i class="fa fa-check"></i><b>9.2.1</b> keeping conditional probabilities straight</a></li>
<li class="chapter" data-level="9.2.2" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#exercises-1"><i class="fa fa-check"></i><b>9.2.2</b> exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#continuous-probability-distributions"><i class="fa fa-check"></i><b>9.3</b> continuous probability distributions</a></li>
<li class="chapter" data-level="9.4" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#dangerous-equations"><i class="fa fa-check"></i><b>9.4</b> dangerous equations</a></li>
<li class="chapter" data-level="9.5" data-path="on-probability-and-statistics.html"><a href="on-probability-and-statistics.html#notes-for-next-revision"><i class="fa fa-check"></i><b>9.5</b> notes for next revision</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html"><i class="fa fa-check"></i><b>10</b> reproducibility and the replication crisis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#answers-to-the-reproducibility-crisis"><i class="fa fa-check"></i><b>10.1</b> answers to the reproducibility crisis</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#partial-answer-1-tweak-or-abandon-nhst"><i class="fa fa-check"></i><b>10.1.1</b> partial answer 1: Tweak or abandon NHST</a></li>
<li class="chapter" data-level="10.1.2" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#partial-answer-2-keep-a-log-of-every-step-of-every-analysis-in-r-markdown-or-jupyter-notebooks"><i class="fa fa-check"></i><b>10.1.2</b> partial answer 2: Keep a log of every step of every analysis in R markdown or Jupyter notebooks</a></li>
<li class="chapter" data-level="10.1.3" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#partial-answer-3-pre-registration-of-your-research"><i class="fa fa-check"></i><b>10.1.3</b> partial answer 3: Pre-registration of your research</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#further-readings"><i class="fa fa-check"></i><b>10.2</b> further readings</a></li>
<li class="chapter" data-level="10.3" data-path="reproducibility-and-the-replication-crisis.html"><a href="reproducibility-and-the-replication-crisis.html#notes-for-next-revision-1"><i class="fa fa-check"></i><b>10.3</b> notes for next revision</a></li>
</ul></li>
<li class="part"><span><b>I Part III Towards data proficiency</b></span></li>
<li class="chapter" data-level="11" data-path="wrangling-and-tidying.html"><a href="wrangling-and-tidying.html"><i class="fa fa-check"></i><b>11</b> wrangling and tidying</a>
<ul>
<li class="chapter" data-level="11.1" data-path="wrangling-and-tidying.html"><a href="wrangling-and-tidying.html#the-structure-of-the-tidyverse"><i class="fa fa-check"></i><b>11.1</b> the structure of the tidyverse</a></li>
<li class="chapter" data-level="11.2" data-path="wrangling-and-tidying.html"><a href="wrangling-and-tidying.html#where-should-we-eat"><i class="fa fa-check"></i><b>11.2</b> where should we eat?</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="wrangling-and-tidying.html"><a href="wrangling-and-tidying.html#tall-and-wide-formats"><i class="fa fa-check"></i><b>11.2.1</b> tall and wide formats</a></li>
<li class="chapter" data-level="11.2.2" data-path="wrangling-and-tidying.html"><a href="wrangling-and-tidying.html#exercises-2"><i class="fa fa-check"></i><b>11.2.2</b> exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="wrangling-and-tidying.html"><a href="wrangling-and-tidying.html#more-on-tidy-coding"><i class="fa fa-check"></i><b>11.3</b> more on tidy coding</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html"><i class="fa fa-check"></i><b>12</b> finding, exploring, cleaning, and combining data</a>
<ul>
<li class="chapter" data-level="12.1" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#florida-educational-data"><i class="fa fa-check"></i><b>12.1</b> florida educational data</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#a-digression-slash-windows-and-the-world."><i class="fa fa-check"></i><b>12.1.1</b> a digression: Slash, Windows and the world.</a></li>
<li class="chapter" data-level="12.1.2" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#getting-data-from-our-machine-into-r"><i class="fa fa-check"></i><b>12.1.2</b> getting data from our machine into R</a></li>
<li class="chapter" data-level="12.1.3" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#which-ones-are-high-schools"><i class="fa fa-check"></i><b>12.1.3</b> which ones are “high schools”?</a></li>
<li class="chapter" data-level="12.1.4" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#can-we-compute-district-county-means-from-these-data"><i class="fa fa-check"></i><b>12.1.4</b> can we compute district (county) means from these data?</a></li>
<li class="chapter" data-level="12.1.5" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#estimating-school-enrollments"><i class="fa fa-check"></i><b>12.1.5</b> estimating school enrollments</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#combining-datasets"><i class="fa fa-check"></i><b>12.2</b> combining datasets</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#challenges-in-joining-datasets"><i class="fa fa-check"></i><b>12.2.1</b> challenges in joining datasets</a></li>
<li class="chapter" data-level="12.2.2" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#some-approaches-to-fixing-the-data"><i class="fa fa-check"></i><b>12.2.2</b> some approaches to fixing the data</a></li>
<li class="chapter" data-level="12.2.3" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#estimating-the-relationship-between-economic-disadvantage-and-graduation-rates"><i class="fa fa-check"></i><b>12.2.3</b> estimating the relationship between economic disadvantage and graduation rates</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="finding-exploring-cleaning-and-combining-data.html"><a href="finding-exploring-cleaning-and-combining-data.html#recap-on-joining-files"><i class="fa fa-check"></i><b>12.3</b> recap / on joining files</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="applied-data-science.html"><a href="applied-data-science.html"><i class="fa fa-check"></i><b>13</b> applied data science</a>
<ul>
<li class="chapter" data-level="13.1" data-path="applied-data-science.html"><a href="applied-data-science.html#public-health-and-covid"><i class="fa fa-check"></i><b>13.1</b> public health and covid</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="applied-data-science.html"><a href="applied-data-science.html#covid-data-in-2025"><i class="fa fa-check"></i><b>13.1.1</b> COVID data in 2025</a></li>
<li class="chapter" data-level="13.1.2" data-path="applied-data-science.html"><a href="applied-data-science.html#a-brief-digression-on-causality"><i class="fa fa-check"></i><b>13.1.2</b> a brief digression on causality</a></li>
<li class="chapter" data-level="13.1.3" data-path="applied-data-science.html"><a href="applied-data-science.html#the-excess-mortality-package"><i class="fa fa-check"></i><b>13.1.3</b> the excess mortality package</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="applied-data-science.html"><a href="applied-data-science.html#other-datasets-in-and-beyond-r"><i class="fa fa-check"></i><b>13.2</b> other datasets in and beyond R</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="applied-data-science.html"><a href="applied-data-science.html#makeextractcombine-your-own-data"><i class="fa fa-check"></i><b>13.2.1</b> make/extract/combine your own data</a></li>
<li class="chapter" data-level="13.2.2" data-path="applied-data-science.html"><a href="applied-data-science.html#keep-it-manageable"><i class="fa fa-check"></i><b>13.2.2</b> keep it manageable</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html"><i class="fa fa-check"></i><b>14</b> strings, factors, dates, and times</a>
<ul>
<li class="chapter" data-level="14.1" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#strings"><i class="fa fa-check"></i><b>14.1</b> strings</a></li>
<li class="chapter" data-level="14.2" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#factors"><i class="fa fa-check"></i><b>14.2</b> factors</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#types-of-babies"><i class="fa fa-check"></i><b>14.2.1</b> types of babies</a></li>
<li class="chapter" data-level="14.2.2" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#types-of-grown-ups"><i class="fa fa-check"></i><b>14.2.2</b> types of grown-ups</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#dates"><i class="fa fa-check"></i><b>14.3</b> dates</a></li>
<li class="chapter" data-level="14.4" data-path="strings-factors-dates-and-times.html"><a href="strings-factors-dates-and-times.html#times"><i class="fa fa-check"></i><b>14.4</b> times</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i><b>15</b> lists</a></li>
<li class="chapter" data-level="16" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html"><i class="fa fa-check"></i><b>16</b> loops, functions, and beyond</a>
<ul>
<li class="chapter" data-level="16.1" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#loops"><i class="fa fa-check"></i><b>16.1</b> loops</a></li>
<li class="chapter" data-level="16.2" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#from-loop-to-apply-to-purrrmap"><i class="fa fa-check"></i><b>16.2</b> from loop to apply to purrr::map</a></li>
<li class="chapter" data-level="16.3" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#some-examples-of-functions"><i class="fa fa-check"></i><b>16.3</b> some examples of functions</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#preliminaries"><i class="fa fa-check"></i><b>16.3.1</b> preliminaries</a></li>
<li class="chapter" data-level="16.3.2" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#the-function"><i class="fa fa-check"></i><b>16.3.2</b> the function</a></li>
<li class="chapter" data-level="16.3.3" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#applying-the-function"><i class="fa fa-check"></i><b>16.3.3</b> applying the function</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="loops-functions-and-beyond.html"><a href="loops-functions-and-beyond.html#how-many-bottles-of-what"><i class="fa fa-check"></i><b>16.4</b> how many bottles of what?</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="from-correlation-to-multiple-regression.html"><a href="from-correlation-to-multiple-regression.html"><i class="fa fa-check"></i><b>17</b> from correlation to multiple regression</a>
<ul>
<li class="chapter" data-level="17.1" data-path="from-correlation-to-multiple-regression.html"><a href="from-correlation-to-multiple-regression.html#bivariate-analysis-galtons-height-data"><i class="fa fa-check"></i><b>17.1</b> bivariate analysis: Galton’s height data</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="from-correlation-to-multiple-regression.html"><a href="from-correlation-to-multiple-regression.html#correlations-based-on-small-samples-are-unstable-a-monte-carlo-demonstration"><i class="fa fa-check"></i><b>17.1.1</b> correlations based on small samples are unstable: A Monte Carlo demonstration</a></li>
<li class="chapter" data-level="17.1.2" data-path="from-correlation-to-multiple-regression.html"><a href="from-correlation-to-multiple-regression.html#from-correlation-to-regression"><i class="fa fa-check"></i><b>17.1.2</b> from correlation to regression</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="from-correlation-to-multiple-regression.html"><a href="from-correlation-to-multiple-regression.html#multivariate-data"><i class="fa fa-check"></i><b>17.2</b> multivariate data</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="cross-validation.html"><a href="cross-validation.html"><i class="fa fa-check"></i><b>18</b> cross-validation</a>
<ul>
<li class="chapter" data-level="18.1" data-path="cross-validation.html"><a href="cross-validation.html#revisiting-the-affairs-data"><i class="fa fa-check"></i><b>18.1</b> revisiting the affairs data</a></li>
<li class="chapter" data-level="18.2" data-path="cross-validation.html"><a href="cross-validation.html#avoiding-capitalizing-on-chance"><i class="fa fa-check"></i><b>18.2</b> avoiding capitalizing on chance</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="cross-validation.html"><a href="cross-validation.html#splitting-the-data-into-training-and-test-subsamples"><i class="fa fa-check"></i><b>18.2.1</b> splitting the data into training and test subsamples</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="cross-validation.html"><a href="cross-validation.html#an-example-of-cross-validated-linear-regression"><i class="fa fa-check"></i><b>18.3</b> an example of cross-validated linear regression</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="cross-validation.html"><a href="cross-validation.html#applying-logistic-regression-analysis-to-the-training-data"><i class="fa fa-check"></i><b>18.3.1</b> applying logistic regression analysis to the training data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html"><i class="fa fa-check"></i><b>19</b> prediction and classification</a>
<ul>
<li class="chapter" data-level="19.1" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#from-regression-to-classification-selection-of-a-threshold"><i class="fa fa-check"></i><b>19.1</b> from regression to classification: selection of a threshold</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#applying-the-model-to-the-test-data"><i class="fa fa-check"></i><b>19.1.1</b> applying the model to the test data</a></li>
<li class="chapter" data-level="19.1.2" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#changing-our-decision-threshold"><i class="fa fa-check"></i><b>19.1.2</b> changing our decision threshold</a></li>
<li class="chapter" data-level="19.1.3" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#more-confusion"><i class="fa fa-check"></i><b>19.1.3</b> more confusion</a></li>
<li class="chapter" data-level="19.1.4" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#rocs-and-auc"><i class="fa fa-check"></i><b>19.1.4</b> ROCs and AUC</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#another-approach-to-classification-k-nearest-neighbor"><i class="fa fa-check"></i><b>19.2</b> another approach to classification: k-nearest neighbor</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#application-the-affairs-data"><i class="fa fa-check"></i><b>19.2.1</b> application: the affairs data</a></li>
<li class="chapter" data-level="19.2.2" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#from-one-doppelganger-to-many"><i class="fa fa-check"></i><b>19.2.2</b> from one doppelganger to many</a></li>
<li class="chapter" data-level="19.2.3" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#the-bayesian-classifier"><i class="fa fa-check"></i><b>19.2.3</b> the Bayesian classifier</a></li>
<li class="chapter" data-level="19.2.4" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#back-to-the-affairs-data"><i class="fa fa-check"></i><b>19.2.4</b> Back to the affairs data</a></li>
<li class="chapter" data-level="19.2.5" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#avoiding-capitalization-on-chance-again"><i class="fa fa-check"></i><b>19.2.5</b> avoiding capitalization on chance (again)</a></li>
<li class="chapter" data-level="19.2.6" data-path="prediction-and-classification.html"><a href="prediction-and-classification.html#the-multinomial-case"><i class="fa fa-check"></i><b>19.2.6</b> the multinomial case</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html"><a href="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html"><i class="fa fa-check"></i><b>20</b> machine learning: chihuahuas vs muffins, and other distinctions and ideas</a>
<ul>
<li class="chapter" data-level="20.1" data-path="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html"><a href="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html#supervised-versus-unsupervised"><i class="fa fa-check"></i><b>20.1</b> supervised versus unsupervised</a></li>
<li class="chapter" data-level="20.2" data-path="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html"><a href="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html#prediction-versus-classification"><i class="fa fa-check"></i><b>20.2</b> prediction versus classification</a></li>
<li class="chapter" data-level="20.3" data-path="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html"><a href="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html#understanding-versus-prediction"><i class="fa fa-check"></i><b>20.3</b> understanding versus prediction</a></li>
<li class="chapter" data-level="20.4" data-path="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html"><a href="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html#bias-versus-variability"><i class="fa fa-check"></i><b>20.4</b> bias versus variability</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html"><a href="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html#resampling-beyond-test-training-and-validation-samples"><i class="fa fa-check"></i><b>20.4.1</b> resampling: beyond test, training, and validation samples</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html"><a href="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html#compensatory-versus-non-compensatory-problems"><i class="fa fa-check"></i><b>20.5</b> compensatory versus non-compensatory problems</a></li>
<li class="chapter" data-level="20.6" data-path="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html"><a href="machine-learning-chihuahuas-vs-muffins-and-other-distinctions-and-ideas.html#a-postscript-the-tidymodels-packages"><i class="fa fa-check"></i><b>20.6</b> a postscript: The Tidymodels packages</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html"><i class="fa fa-check"></i><b>21</b> working with text: a case study</a>
<ul>
<li class="chapter" data-level="21.1" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#federal-workers"><i class="fa fa-check"></i><b>21.1</b> federal workers</a></li>
<li class="chapter" data-level="21.2" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#finding-reddit-data"><i class="fa fa-check"></i><b>21.2</b> finding Reddit data</a></li>
<li class="chapter" data-level="21.3" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#some-initial-observations"><i class="fa fa-check"></i><b>21.3</b> some initial observations</a></li>
<li class="chapter" data-level="21.4" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#preprocessing"><i class="fa fa-check"></i><b>21.4</b> preprocessing</a></li>
<li class="chapter" data-level="21.5" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#comparing-the-words-and-stems"><i class="fa fa-check"></i><b>21.5</b> comparing the words and stems</a></li>
<li class="chapter" data-level="21.6" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#construction-of-differential-word-clouds"><i class="fa fa-check"></i><b>21.6</b> Construction of differential word clouds</a></li>
<li class="chapter" data-level="21.7" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#bigrams"><i class="fa fa-check"></i><b>21.7</b> bigrams</a></li>
<li class="chapter" data-level="21.8" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#categories-of-words"><i class="fa fa-check"></i><b>21.8</b> categories of words</a></li>
<li class="chapter" data-level="21.9" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#code-for-assessing-liwc-effect-sizes-between-2-groups"><i class="fa fa-check"></i><b>21.9</b> Code for assessing LIWC effect sizes between 2 groups</a></li>
<li class="chapter" data-level="21.10" data-path="working-with-text-a-case-study.html"><a href="working-with-text-a-case-study.html#exercise-what-would-you-do-next"><i class="fa fa-check"></i><b>21.10</b> exercise: what would you do next?</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="an-introduction-to-networks.html"><a href="an-introduction-to-networks.html"><i class="fa fa-check"></i><b>22</b> an introduction to networks</a>
<ul>
<li class="chapter" data-level="22.1" data-path="an-introduction-to-networks.html"><a href="an-introduction-to-networks.html#key-network-concepts"><i class="fa fa-check"></i><b>22.1</b> key network concepts</a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="an-introduction-to-networks.html"><a href="an-introduction-to-networks.html#a-simple-example-networks-and-balance-theory"><i class="fa fa-check"></i><b>22.1.1</b> a simple example: networks and balance theory</a></li>
<li class="chapter" data-level="22.1.2" data-path="an-introduction-to-networks.html"><a href="an-introduction-to-networks.html#centrality"><i class="fa fa-check"></i><b>22.1.2</b> centrality</a></li>
<li class="chapter" data-level="22.1.3" data-path="an-introduction-to-networks.html"><a href="an-introduction-to-networks.html#components-and-communities"><i class="fa fa-check"></i><b>22.1.3</b> components and communities</a></li>
<li class="chapter" data-level="22.1.4" data-path="an-introduction-to-networks.html"><a href="an-introduction-to-networks.html#another-example-its-a-small-world"><i class="fa fa-check"></i><b>22.1.4</b> another example: it’s a small world</a></li>
<li class="chapter" data-level="22.1.5" data-path="an-introduction-to-networks.html"><a href="an-introduction-to-networks.html#static-and-dynamic-networks"><i class="fa fa-check"></i><b>22.1.5</b> static and dynamic networks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="case-study-the-network-structure-of-computational-social-science.html"><a href="case-study-the-network-structure-of-computational-social-science.html"><i class="fa fa-check"></i><b>23</b> case study: the network structure of computational social science</a>
<ul>
<li class="chapter" data-level="23.0.1" data-path="case-study-the-network-structure-of-computational-social-science.html"><a href="case-study-the-network-structure-of-computational-social-science.html#from-citation-network-to-structural-network"><i class="fa fa-check"></i><b>23.0.1</b> from citation network to structural network</a></li>
<li class="chapter" data-level="23.0.2" data-path="case-study-the-network-structure-of-computational-social-science.html"><a href="case-study-the-network-structure-of-computational-social-science.html#looking-at-the-whole-citation-network"><i class="fa fa-check"></i><b>23.0.2</b> looking at the whole citation network</a></li>
<li class="chapter" data-level="23.0.3" data-path="case-study-the-network-structure-of-computational-social-science.html"><a href="case-study-the-network-structure-of-computational-social-science.html#the-structural-network-centrality-and-community-structure"><i class="fa fa-check"></i><b>23.0.3</b> the structural network: Centrality and community structure</a></li>
<li class="chapter" data-level="23.0.4" data-path="case-study-the-network-structure-of-computational-social-science.html"><a href="case-study-the-network-structure-of-computational-social-science.html#visualizing-the-network"><i class="fa fa-check"></i><b>23.0.4</b> visualizing the network</a></li>
<li class="chapter" data-level="23.0.5" data-path="case-study-the-network-structure-of-computational-social-science.html"><a href="case-study-the-network-structure-of-computational-social-science.html#exploring-the-communities"><i class="fa fa-check"></i><b>23.0.5</b> exploring the communities</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="some-ethical-concerns-for-the-data-scientist.html"><a href="some-ethical-concerns-for-the-data-scientist.html"><i class="fa fa-check"></i><b>24</b> some ethical concerns for the data scientist</a>
<ul>
<li class="chapter" data-level="24.1" data-path="some-ethical-concerns-for-the-data-scientist.html"><a href="some-ethical-concerns-for-the-data-scientist.html#ethics-and-personality-harvesting"><i class="fa fa-check"></i><b>24.1</b> ethics and personality harvesting</a></li>
<li class="chapter" data-level="24.2" data-path="some-ethical-concerns-for-the-data-scientist.html"><a href="some-ethical-concerns-for-the-data-scientist.html#the-law-of-unintended-consequences"><i class="fa fa-check"></i><b>24.2</b> the law of unintended consequences</a></li>
<li class="chapter" data-level="24.3" data-path="some-ethical-concerns-for-the-data-scientist.html"><a href="some-ethical-concerns-for-the-data-scientist.html#your-privacy-is-my-concern"><i class="fa fa-check"></i><b>24.3</b> your privacy is my concern</a></li>
<li class="chapter" data-level="24.4" data-path="some-ethical-concerns-for-the-data-scientist.html"><a href="some-ethical-concerns-for-the-data-scientist.html#who-should-hold-the-digital-keys"><i class="fa fa-check"></i><b>24.4</b> who should hold the digital keys?</a></li>
<li class="chapter" data-level="24.5" data-path="some-ethical-concerns-for-the-data-scientist.html"><a href="some-ethical-concerns-for-the-data-scientist.html#contact-tracing-and-covid-19"><i class="fa fa-check"></i><b>24.5</b> contact-tracing and COVID-19</a></li>
<li class="chapter" data-level="24.6" data-path="some-ethical-concerns-for-the-data-scientist.html"><a href="some-ethical-concerns-for-the-data-scientist.html#the-digital-divide"><i class="fa fa-check"></i><b>24.6</b> the digital divide</a></li>
<li class="chapter" data-level="24.7" data-path="some-ethical-concerns-for-the-data-scientist.html"><a href="some-ethical-concerns-for-the-data-scientist.html#still-more-case-studies"><i class="fa fa-check"></i><b>24.7</b> still more case studies</a></li>
<li class="chapter" data-level="24.8" data-path="some-ethical-concerns-for-the-data-scientist.html"><a href="some-ethical-concerns-for-the-data-scientist.html#some-potential-remedies"><i class="fa fa-check"></i><b>24.8</b> some potential remedies</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data science for the liberal arts</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="finding-exploring-cleaning-and-combining-data" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">12</span> finding, exploring, cleaning, and combining data<a href="finding-exploring-cleaning-and-combining-data.html#finding-exploring-cleaning-and-combining-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><strong>Data science, oddly enough, begins not with R… but with <em>data</em>.</strong> There is no shortage of datasets available to analyze, and each can give rise to a host of interesting analyses and insights.</p>
<p>What do you want to study? Let’s begin by looking at schools</p>
<div id="florida-educational-data" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> florida educational data<a href="finding-exploring-cleaning-and-combining-data.html#florida-educational-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Florida, like many states, makes data on school quality publicly available. Schools are assessed, in part, on student performance (scores on comprehensive tests in fields such as English Language Arts). Schools are also assessed on measures such as whether this performance has increased across years, the percent of students who graduate in four years, and the percentage of students who pass Advanced Placement and related exams. You can learn more about these measures at <a href="https://www.fldoe.org/core/fileparse.php/18534/urlt/SchoolGradesOverview24.pdf" class="uri">https://www.fldoe.org/core/fileparse.php/18534/urlt/SchoolGradesOverview24.pdf</a>).</p>
<p>The data itself are available in an Excel spreadsheet. Here’s a screenshot of the first few columns and rows of the file.</p>
<p><img src="images/FloridaSchools.png" /></p>
<p>It’s apparent that the file is a little messy. As we saw in a prior chapter, we would like the first row of the dataset to include the variable (column) names: here, there are three rows of header prior to this. Further, many of the variable names include spaces, minus signs, and the like.</p>
<p>We will first download the data from the web (at this writing, you can find it at <a href="https://www.fldoe.org/file/18534/SchoolGrades24.xlsx" class="uri">https://www.fldoe.org/file/18534/SchoolGrades24.xlsx</a>). We will store it on our disk in a subdirectory of our project folder called ‘data.’</p>
<div class="float">
<img src="images/slash.png" alt="Slash: Windows or Mac?" />
<div class="figcaption"><em>Slash: Windows or Mac?</em></div>
</div>
<div id="a-digression-slash-windows-and-the-world." class="section level3 hasAnchor" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> a digression: Slash, Windows and the world.<a href="finding-exploring-cleaning-and-combining-data.html#a-digression-slash-windows-and-the-world." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once we download the data, we need to tell R where to find it. If we are working with an <em>Rproject</em>, we might keep everything - code, data, and output - in the same directory. But we often need or want to store data in a separate place, in which case you will need to specify a file path, which will include one or more slashes (and not the Guns N’ Roses guitarist kind).</p>
<p>In most of the computing world, including Macs, filepaths are delineated by forward slashes (“/”). On a Windows machine, they instead include backwards slashes (“\”). To further complicate matters, <strong>the backwards slash has a special significance as an</strong> <strong>‘escape’ character</strong> - this means, as we will see briefly below as well as in the chapter on text analysis, that it tells the system to interpret the following character literally (for example, a comma is read as a <em>comma</em>) rather than symbolically (where a comma might be read as a separator between two objects).</p>
<p>In any operating system, we can locate files using relative paths (starting in your project directory) or absolute ones (starting in your computer’s root directory; see below). Relative paths generally work better, as you can use the code on multiple machines. But if you can’t find your datafile, try the absolute path as a kludge.</p>
</div>
<div id="getting-data-from-our-machine-into-r" class="section level3 hasAnchor" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> getting data from our machine into R<a href="finding-exploring-cleaning-and-combining-data.html#getting-data-from-our-machine-into-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ones we have specified the datapath, we can use the read_excel command, which is in the readxl library, which is part of the peripheral tidyverse (so you do not need to first install it on your computer). We’ll tell R to skip the first three lines of text.</p>
<p>We’ll continue the pipe with a simple command from the janitor package - which you will need to load on to your machine. That command gets rid of spaces in variable names and replaces them with <em>camelCase</em> or, the default, <strong>snake_case</strong>. (To see why you want to do this try omitting this line from your code).</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-1" tabindex="-1"></a><span class="co"># relative path with backward slashes replaced by forward ones</span></span>
<span id="cb36-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-2" tabindex="-1"></a>datadir <span class="ot">&lt;-</span> <span class="st">&quot;data/&quot;</span> <span class="co"># this is a relative path</span></span>
<span id="cb36-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-3" tabindex="-1"></a><span class="co"># absolute path with backward slashes made literal with escapes</span></span>
<span id="cb36-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-4" tabindex="-1"></a><span class="co"># datadir &lt;- &quot;C:\\Users\\me\\OneDrive\\GitRepos\\DSLA25\\data\\&quot;</span></span>
<span id="cb36-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-5" tabindex="-1"></a></span>
<span id="cb36-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-6" tabindex="-1"></a>FloridaSchools <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(</span>
<span id="cb36-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-7" tabindex="-1"></a><span class="co"># here, we could also just do </span></span>
<span id="cb36-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-8" tabindex="-1"></a><span class="co">#   &quot;data/SchoolGrades24.xlsx&quot;), </span></span>
<span id="cb36-9"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-9" tabindex="-1"></a>    <span class="fu">paste0</span>(datadir, <span class="st">&quot;SchoolGrades24.xlsx&quot;</span>),</span>
<span id="cb36-10"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-10" tabindex="-1"></a>    <span class="at">skip =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb36-11"><a href="finding-exploring-cleaning-and-combining-data.html#cb36-11" tabindex="-1"></a>    <span class="fu">clean_names</span>() </span></code></pre></div>
</div>
<div id="which-ones-are-high-schools" class="section level3 hasAnchor" number="12.1.3">
<h3><span class="header-section-number">12.1.3</span> which ones are “high schools”?<a href="finding-exploring-cleaning-and-combining-data.html#which-ones-are-high-schools" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are a few ways that we could reduce this to just High Schools - one is to include only schools which report a graduation rate that is not a missing value; the other is to include just schools that are explicitly named “high school.” (We could also use both of these, or something else). Here, we will use the latter - filtering on schools which have “HIGH SCHOOL” in the school_name.</p>
<p>We then reduce the columns to a handful of measures of interest.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-1" tabindex="-1"></a>FloridaHighSchools <span class="ot">&lt;-</span> FloridaSchools <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-2" tabindex="-1"></a><span class="co">#   drop_na(&#39;graduation_rate_2022_23&#39;) |&gt; </span></span>
<span id="cb37-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-3" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">str_detect</span>(school_name,</span>
<span id="cb37-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-4" tabindex="-1"></a>                      <span class="st">&quot;HIGH SCHOOL&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb37-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-5" tabindex="-1"></a>    <span class="fu">select</span> (district_number, district_name, </span>
<span id="cb37-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-6" tabindex="-1"></a>            school_number, school_name,</span>
<span id="cb37-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-7" tabindex="-1"></a>            english_language_arts_achievement,</span>
<span id="cb37-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-8" tabindex="-1"></a>            mathematics_achievement,</span>
<span id="cb37-9"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-9" tabindex="-1"></a>            science_achievement,</span>
<span id="cb37-10"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-10" tabindex="-1"></a>            social_studies_achievement,</span>
<span id="cb37-11"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-11" tabindex="-1"></a>            graduation_rate_2022_23,</span>
<span id="cb37-12"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-12" tabindex="-1"></a>            grade_2024,</span>
<span id="cb37-13"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-13" tabindex="-1"></a>            percent_of_economically_disadvantaged_students)</span>
<span id="cb37-14"><a href="finding-exploring-cleaning-and-combining-data.html#cb37-14" tabindex="-1"></a><span class="fu">head</span>(FloridaHighSchools)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   district_number district_name school_number school_name english_language_art…¹
##   &lt;chr&gt;           &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;                        &lt;dbl&gt;
## 1 01              ALACHUA       0151          GAINESVILL…                     54
## 2 01              ALACHUA       0201          HAWTHORNE …                     32
## 3 01              ALACHUA       0261          NEWBERRY H…                     53
## 4 01              ALACHUA       0271          SANTA FE H…                     56
## 5 01              ALACHUA       0411          PROFESSION…                     64
## 6 01              ALACHUA       0421          EASTSIDE H…                     47
## # ℹ abbreviated name: ¹​english_language_arts_achievement
## # ℹ 6 more variables: mathematics_achievement &lt;dbl&gt;, science_achievement &lt;dbl&gt;,
## #   social_studies_achievement &lt;dbl&gt;, graduation_rate_2022_23 &lt;dbl&gt;,
## #   grade_2024 &lt;chr&gt;, percent_of_economically_disadvantaged_students &lt;dbl&gt;</code></pre>
</div>
<div id="can-we-compute-district-county-means-from-these-data" class="section level3 hasAnchor" number="12.1.4">
<h3><span class="header-section-number">12.1.4</span> can we compute district (county) means from these data?<a href="finding-exploring-cleaning-and-combining-data.html#can-we-compute-district-county-means-from-these-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can reduce the set of high schools to one line per district, with scores the simple means of all schools in the district.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb39-1" tabindex="-1"></a>FloridaHighSchoolsbyDistict <span class="ot">&lt;-</span> FloridaHighSchools <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb39-2" tabindex="-1"></a> <span class="co">#   select(-grade, -school_name) |&gt; </span></span>
<span id="cb39-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb39-3" tabindex="-1"></a>    <span class="fu">group_by</span>(district_name) <span class="sc">|&gt;</span> </span>
<span id="cb39-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb39-4" tabindex="-1"></a>    <span class="fu">summarise_if</span>(is.numeric, mean, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>These average scores should be viewed with skepticism, because it treats small and large schools as equal. Consider graduation rates: If a district has just two schools, one with just 10 students (and graduates all of them), and a larger school with 990 students (but graduates only half - 495 - of them), we would get an estimated graduation rate of 75% ((1.0 + .5)/2). But actually, the district-wide graduation rate would be 50.5%. School enrollment data is needed to accurately estimate district effects from individual schools.</p>
</div>
<div id="estimating-school-enrollments" class="section level3 hasAnchor" number="12.1.5">
<h3><span class="header-section-number">12.1.5</span> estimating school enrollments<a href="finding-exploring-cleaning-and-combining-data.html#estimating-school-enrollments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>At this writing (March 2025), I can’t find a dataset on Florida HS enrollments that is free, recent, easy to pull down, and reasonably comprehensive. For our purposes, we can work with an estimate of this: There are measures of school size in football league data (<a href="https://fhsaa.com/news/2023/12/21/football-classifications-available-for-2024-25-2025-26.aspx" class="uri">https://fhsaa.com/news/2023/12/21/football-classifications-available-for-2024-25-2025-26.aspx</a>).</p>
<p>The names for schools there are formatted differently from our other dataset, so this will take a little work. We will first read in the data, then estimate enrollments based on the class of the school (Rural, 1R, 1A, 2A, 3A, 4A, 5A, 6A, 7A).</p>
<p>Can you describe what is happening in each line of code in this section?</p>
<p>Note the use of the escape character in this chunk</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb40-1" tabindex="-1"></a>EnrollmentsFromFHSAA <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(</span>
<span id="cb40-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb40-2" tabindex="-1"></a>    <span class="fu">paste0</span>(datadir, <span class="st">&quot;Football_2024_26.xlsx&quot;</span>),</span>
<span id="cb40-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb40-3" tabindex="-1"></a>        <span class="at">skip =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb40-4" tabindex="-1"></a>    <span class="fu">clean_names</span>()</span>
<span id="cb40-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb40-5" tabindex="-1"></a><span class="fu">head</span>(EnrollmentsFromFHSAA)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   school_name                      class       region      district   
##   &lt;chr&gt;                            &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;      
## 1 All Saints&#39; (Winter Haven)       Independent Independent Independent
## 2 Alonso (Tampa)                   7A          2           7          
## 3 American (Hialeah)               4A          4           16         
## 4 American Heritage (Delray Beach) 2A          3           12         
## 5 American Heritage (Plantation)   4A          4           15         
## 6 Anclote (Holiday)                3A          3           9</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-1" tabindex="-1"></a>EnrollmentsFromFHSAA <span class="ot">&lt;-</span> EnrollmentsFromFHSAA <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-2" tabindex="-1"></a>    <span class="fu">separate</span>(<span class="at">col =</span>  <span class="st">&quot;school_name&quot;</span>,</span>
<span id="cb42-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-3" tabindex="-1"></a>             <span class="at">into =</span>  <span class="fu">c</span>(<span class="st">&quot;school_name&quot;</span>, <span class="st">&quot;school_place&quot;</span>), </span>
<span id="cb42-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-4" tabindex="-1"></a>             <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">(&quot;</span>, <span class="at">extra =</span> <span class="st">&quot;merge&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb42-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-5" tabindex="-1"></a>    <span class="fu">mutate</span> (<span class="at">est_enrollment =</span></span>
<span id="cb42-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-6" tabindex="-1"></a>            <span class="fu">case_when</span>(</span>
<span id="cb42-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-7" tabindex="-1"></a>                class <span class="sc">==</span> <span class="st">&quot;Rural&quot;</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="dv">111</span>,<span class="dv">558</span>),</span>
<span id="cb42-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-8" tabindex="-1"></a>                class <span class="sc">==</span> <span class="st">&quot;1R&quot;</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="dv">111</span>,<span class="dv">558</span>),</span>
<span id="cb42-9"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-9" tabindex="-1"></a>                class <span class="sc">==</span> <span class="st">&quot;1A&quot;</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="dv">61</span>,<span class="dv">643</span>),</span>
<span id="cb42-10"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-10" tabindex="-1"></a>                class <span class="sc">==</span> <span class="st">&quot;2A&quot;</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="dv">644</span>,<span class="dv">1166</span>),</span>
<span id="cb42-11"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-11" tabindex="-1"></a>                class <span class="sc">==</span> <span class="st">&quot;3A&quot;</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="dv">1167</span>,<span class="dv">1542</span>),</span>
<span id="cb42-12"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-12" tabindex="-1"></a>                class <span class="sc">==</span> <span class="st">&quot;4A&quot;</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="dv">1543</span>,<span class="dv">1822</span>),</span>
<span id="cb42-13"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-13" tabindex="-1"></a>                class <span class="sc">==</span> <span class="st">&quot;5A&quot;</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="dv">1823</span>,<span class="dv">2135</span>),</span>
<span id="cb42-14"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-14" tabindex="-1"></a>                class <span class="sc">==</span> <span class="st">&quot;6A&quot;</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="dv">2136</span>,<span class="dv">2512</span>),</span>
<span id="cb42-15"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-15" tabindex="-1"></a>                class <span class="sc">==</span> <span class="st">&quot;7A&quot;</span> <span class="sc">~</span> <span class="fu">mean</span>(<span class="dv">2512</span>,<span class="dv">4627</span>), </span>
<span id="cb42-16"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-16" tabindex="-1"></a>                <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb42-17"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-17" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> <span class="fu">toupper</span>(school_name)) <span class="sc">|&gt;</span> </span>
<span id="cb42-18"><a href="finding-exploring-cleaning-and-combining-data.html#cb42-18" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_place =</span> <span class="fu">str_remove</span>(school_place,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">)&quot;</span>))</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Missing
## pieces filled with `NA` in 192
## rows [8, 18, 21, 22, 24, 26,
## 32, 33, 44, 46, 47, 49, 53, 57,
## 59, 60, 62, 67, 73, 81, ...].</code></pre>
<p>When we run this chunk, we get a warning. What is it about? Is it ok?</p>
</div>
</div>
<div id="combining-datasets" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> combining datasets<a href="finding-exploring-cleaning-and-combining-data.html#combining-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The enrollment data are now in the EnrollmentsFromFHSAA dataset. We first edit the school names from the FloridaHighSchools file to see if we can get them to match. Then we try to merge (left join) these with the FloridaHighSchools data, using the school_name variable as the key.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-1" tabindex="-1"></a>FloridaHighSchools <span class="ot">&lt;-</span> FloridaHighSchools <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-2" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> </span>
<span id="cb44-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-3" tabindex="-1"></a>               <span class="fu">str_replace</span>(school_name,</span>
<span id="cb44-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-4" tabindex="-1"></a>                           <span class="st">&quot;JUNIOR/SENIOR HIGH SCHOOL&quot;</span>,<span class="st">&quot;&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb44-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-5" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> </span>
<span id="cb44-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-6" tabindex="-1"></a>               <span class="fu">str_replace</span>(school_name,</span>
<span id="cb44-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-7" tabindex="-1"></a>                           <span class="st">&quot;MIDDLE/HIGH SCHOOL&quot;</span>,<span class="st">&quot;&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb44-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-8" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> </span>
<span id="cb44-9"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-9" tabindex="-1"></a>               <span class="fu">str_replace</span>(school_name,</span>
<span id="cb44-10"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-10" tabindex="-1"></a>                           <span class="st">&quot;SENIOR HIGH SCHOOL&quot;</span>,<span class="st">&quot;&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb44-11"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-11" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> </span>
<span id="cb44-12"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-12" tabindex="-1"></a>               <span class="fu">str_replace</span>(school_name,</span>
<span id="cb44-13"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-13" tabindex="-1"></a>                           <span class="st">&quot;HIGH SCHOOL&quot;</span>,<span class="st">&quot;&quot;</span>))</span>
<span id="cb44-14"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-14" tabindex="-1"></a>FloridaHighSchools2 <span class="ot">&lt;-</span> FloridaHighSchools <span class="sc">|&gt;</span></span>
<span id="cb44-15"><a href="finding-exploring-cleaning-and-combining-data.html#cb44-15" tabindex="-1"></a>    <span class="fu">left_join</span>(EnrollmentsFromFHSAA, <span class="at">by =</span> <span class="st">&quot;school_name&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in left_join(FloridaHighSchools, EnrollmentsFromFHSAA, by = &quot;school_name&quot;): Detected an unexpected
## many-to-many relationship
## between `x` and `y`.
## ℹ Row 38 of `x` matches
##   multiple rows in `y`.
## ℹ Row 187 of `y` matches
##   multiple rows in `x`.
## ℹ If a many-to-many
##   relationship is expected, set
##   `relationship =
##   &quot;many-to-many&quot;` to silence
##   this warning.</code></pre>
<p>But when we do this, we get another warning message. Why is it there?</p>
<div id="challenges-in-joining-datasets" class="section level3 hasAnchor" number="12.2.1">
<h3><span class="header-section-number">12.2.1</span> challenges in joining datasets<a href="finding-exploring-cleaning-and-combining-data.html#challenges-in-joining-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In each of the two datasets, there are duplicate names - for example, there are two “Atlantic” High Schools in the both the Florida High School (FHS) and the Florida High School Athletic Association (FHSAA) datasets. We can see this by looking at the output of the following commands:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-1" tabindex="-1"></a>SchoolsWithSameNamesInFHS <span class="ot">&lt;-</span> FloridaHighSchools <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-2" tabindex="-1"></a>    <span class="fu">group_by</span>(school_name) <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-3" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb46-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-4" tabindex="-1"></a><span class="co">#    select (school_name, district_name) |&gt; </span></span>
<span id="cb46-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-5" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb46-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-6" tabindex="-1"></a>    <span class="fu">arrange</span>(school_name)</span>
<span id="cb46-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-7" tabindex="-1"></a></span>
<span id="cb46-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-8" tabindex="-1"></a>SchoolsWithSameNamesInEnrollments <span class="ot">&lt;-</span> EnrollmentsFromFHSAA <span class="sc">|&gt;</span> </span>
<span id="cb46-9"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-9" tabindex="-1"></a>    <span class="fu">group_by</span>(school_name) <span class="sc">|&gt;</span></span>
<span id="cb46-10"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-10" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">&gt;</span> <span class="dv">1</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb46-11"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-11" tabindex="-1"></a><span class="co">#    select (school_name, school_place) |&gt; </span></span>
<span id="cb46-12"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-12" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb46-13"><a href="finding-exploring-cleaning-and-combining-data.html#cb46-13" tabindex="-1"></a>    <span class="fu">arrange</span>(school_name)</span></code></pre></div>
<p>There are 12 schools (6 pairs) in the FHS data, and 26 schools (13 pairs) in the FHSAA data. Ten of these schools are in common across the two sets, the remainder are unique to one or the other.</p>
</div>
<div id="some-approaches-to-fixing-the-data" class="section level3 hasAnchor" number="12.2.2">
<h3><span class="header-section-number">12.2.2</span> some approaches to fixing the data<a href="finding-exploring-cleaning-and-combining-data.html#some-approaches-to-fixing-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In dealing with large datasets, it is fairly common that code will work correctly for a large majority of the cases, and that creativity is needed to efficiently fix the remainder. Here, there are at least four (non-mutually-exclusive) approaches that might work. In decreasing order of comprehensiveness:</p>
<ul>
<li><p>The first approach would be to dig deeper, and to find another source for the school enrollment data. The data we have are imperfect in at least three ways:</p>
<ul>
<li><p>Enrollment data are missing for many schools (i.e., “independent” schools).</p></li>
<li><p>Many schools on this list do not show up in the FHS list</p></li>
<li><p>The enrollment data we have from these schools are estimates, not actual counts</p></li>
</ul></li>
<li><p>The second approach would be to find a geographic dataset that includes towns and counties, then to use this as a key to join our two high school files. If we were working with a larger dataset, this would be worthwhile to try.</p></li>
<li><p>The third approach would be to manually edit the datasets so that we could include the schools with multiple names.</p></li>
<li><p>The fourth approach would be to run an initial analysis on the data we have, putting aside the duplicate schools. In the event that the results warrant closer analysis, we could then move to a more comprehensive solution. This is the place to begin:</p></li>
</ul>
<div id="the-simplest-approach" class="section level4 hasAnchor" number="12.2.2.1">
<h4><span class="header-section-number">12.2.2.1</span> the simplest approach<a href="finding-exploring-cleaning-and-combining-data.html#the-simplest-approach" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In order to merge the data, we first need to make sure that there are no spaces or tabs in the “school_name” variable that will join the datasets.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-1" tabindex="-1"></a>SchoolsWithUniqueNamesInFHS <span class="ot">&lt;-</span> FloridaHighSchools <span class="sc">|&gt;</span> </span>
<span id="cb47-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-2" tabindex="-1"></a>    <span class="fu">group_by</span>(school_name) <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-3" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> <span class="fu">str_trim</span>(school_name)) <span class="sc">|&gt;</span> </span>
<span id="cb47-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-4" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-5" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb47-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-6" tabindex="-1"></a></span>
<span id="cb47-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-7" tabindex="-1"></a>SchoolsWithUniqueNamesInEnrollments <span class="ot">&lt;-</span> EnrollmentsFromFHSAA <span class="sc">|&gt;</span> </span>
<span id="cb47-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-8" tabindex="-1"></a>    <span class="fu">group_by</span>(school_name) <span class="sc">|&gt;</span></span>
<span id="cb47-9"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-9" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> <span class="fu">str_trim</span>(school_name)) <span class="sc">|&gt;</span> </span>
<span id="cb47-10"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-10" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-11"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-11" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb47-12"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-12" tabindex="-1"></a></span>
<span id="cb47-13"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-13" tabindex="-1"></a>FloridaHighSchools2 <span class="ot">&lt;-</span> SchoolsWithUniqueNamesInFHS <span class="sc">|&gt;</span></span>
<span id="cb47-14"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-14" tabindex="-1"></a>    <span class="fu">left_join</span>(SchoolsWithUniqueNamesInEnrollments, </span>
<span id="cb47-15"><a href="finding-exploring-cleaning-and-combining-data.html#cb47-15" tabindex="-1"></a>              <span class="at">by =</span> <span class="st">&quot;school_name&quot;</span>)</span></code></pre></div>
<p>We compute the estimated graduation rate for districts (adjGradRate) by weighing schools by their estimated enrollments as follows</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb48-1" tabindex="-1"></a>GradCountsRates <span class="ot">&lt;-</span> FloridaHighSchools2 <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb48-2" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">est_Ngrads =</span> </span>
<span id="cb48-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb48-3" tabindex="-1"></a>               <span class="fu">round</span>(est_enrollment <span class="sc">*</span> .<span class="dv">01</span> <span class="sc">*</span></span>
<span id="cb48-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb48-4" tabindex="-1"></a>               graduation_rate_2022_23),<span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb48-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb48-5" tabindex="-1"></a>    <span class="fu">select</span>(district_name, est_enrollment, est_Ngrads) <span class="sc">|&gt;</span> </span>
<span id="cb48-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb48-6" tabindex="-1"></a>    <span class="fu">group_by</span>(district_name) <span class="sc">|&gt;</span> </span>
<span id="cb48-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb48-7" tabindex="-1"></a>    <span class="fu">summarise_if</span>(is.numeric,sum, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb48-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb48-8" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">adjGradRate =</span> est_Ngrads <span class="sc">/</span> est_enrollment)</span></code></pre></div>
</div>
<div id="adding-in-the-schools-with-duplicate-names" class="section level4 hasAnchor" number="12.2.2.2">
<h4><span class="header-section-number">12.2.2.2</span> adding in the schools with duplicate names<a href="finding-exploring-cleaning-and-combining-data.html#adding-in-the-schools-with-duplicate-names" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If we wanted to examine the high school enrollment and graduation data more closely, we can manually rename the duplicate school names. Here’s one approach:</p>
<p>Begin by cleaning up the white space in the school name field (str_trim). Then, in the FHS data, rename schools by concatenating (str_c) school name and district name. Then manually edit the relevant cases in the FHSAA data (using mutate + case_when), and finally concatenating school and district name here as well.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-1" tabindex="-1"></a>FixNamesInFHS <span class="ot">&lt;-</span> SchoolsWithSameNamesInFHS <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-2" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> <span class="fu">str_trim</span>(school_name)) <span class="sc">|&gt;</span> </span>
<span id="cb49-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-3" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> <span class="fu">str_c</span>(school_name, <span class="st">&quot;_&quot;</span>,district_name))</span>
<span id="cb49-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-4" tabindex="-1"></a>FixNamesInFHSAA <span class="ot">&lt;-</span> SchoolsWithSameNamesInEnrollments <span class="sc">|&gt;</span> </span>
<span id="cb49-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-5" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">school_name =</span> <span class="fu">str_trim</span>(school_name)) <span class="sc">|&gt;</span> </span>
<span id="cb49-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">district_name =</span> <span class="fu">case_when</span> (</span>
<span id="cb49-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-7" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;Delray Beach&quot;</span> <span class="sc">~</span></span>
<span id="cb49-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-8" tabindex="-1"></a>            <span class="st">&quot;PALM BEACH&quot;</span>, </span>
<span id="cb49-9"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-9" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;Port Orange&quot;</span> <span class="sc">~</span></span>
<span id="cb49-10"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-10" tabindex="-1"></a>            <span class="st">&quot;VOLUSIA&quot;</span>, </span>
<span id="cb49-11"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-11" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;Fort Myers&quot;</span> <span class="sc">~</span></span>
<span id="cb49-12"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-12" tabindex="-1"></a>            <span class="st">&quot;LEE&quot;</span>, </span>
<span id="cb49-13"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-13" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;Kissimmee&quot;</span> <span class="sc">~</span></span>
<span id="cb49-14"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-14" tabindex="-1"></a>            <span class="st">&quot;OSCEOLA&quot;</span>,</span>
<span id="cb49-15"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-15" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;Oakland Park&quot;</span> <span class="sc">~</span></span>
<span id="cb49-16"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-16" tabindex="-1"></a>            <span class="st">&quot;BROWARD&quot;</span>, </span>
<span id="cb49-17"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-17" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;St. Petersburg&quot;</span> <span class="sc">~</span></span>
<span id="cb49-18"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-18" tabindex="-1"></a>            <span class="st">&quot;PINELLAS&quot;</span>, </span>
<span id="cb49-19"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-19" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;Riverview&quot;</span> <span class="sc">~</span></span>
<span id="cb49-20"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-20" tabindex="-1"></a>            <span class="st">&quot;HILLSBOROUGH&quot;</span>, </span>
<span id="cb49-21"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-21" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;Sarasota&quot;</span> <span class="sc">~</span></span>
<span id="cb49-22"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-22" tabindex="-1"></a>            <span class="st">&quot;SARASOTA&quot;</span>, </span>
<span id="cb49-23"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-23" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;Sanford&quot;</span> <span class="sc">~</span></span>
<span id="cb49-24"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-24" tabindex="-1"></a>            <span class="st">&quot;PINELLAS&quot;</span>, </span>
<span id="cb49-25"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-25" tabindex="-1"></a>        school_place <span class="sc">==</span> <span class="st">&quot;Seminole&quot;</span> <span class="sc">~</span></span>
<span id="cb49-26"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-26" tabindex="-1"></a>            <span class="st">&quot;SEMINOLE&quot;</span>, </span>
<span id="cb49-27"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-27" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb49-28"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-28" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb49-29"><a href="finding-exploring-cleaning-and-combining-data.html#cb49-29" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">school_name =</span> <span class="fu">str_c</span>(school_name, <span class="st">&quot;_&quot;</span>,district_name)) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>district_name)</span></code></pre></div>
<p>then we add these data back in with the FHS and FHSAA data and rerun the analysis</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-1" tabindex="-1"></a>FHSdata <span class="ot">&lt;-</span> SchoolsWithUniqueNamesInFHS <span class="sc">|&gt;</span> </span>
<span id="cb50-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-2" tabindex="-1"></a>    <span class="fu">bind_rows</span>(FixNamesInFHS)</span>
<span id="cb50-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-3" tabindex="-1"></a></span>
<span id="cb50-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-4" tabindex="-1"></a>FHSAAdata <span class="ot">&lt;-</span> SchoolsWithUniqueNamesInEnrollments <span class="sc">|&gt;</span> </span>
<span id="cb50-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-5" tabindex="-1"></a>    <span class="fu">bind_rows</span> (FixNamesInFHSAA)</span>
<span id="cb50-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-6" tabindex="-1"></a></span>
<span id="cb50-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-7" tabindex="-1"></a>FloridaHighSchools3 <span class="ot">&lt;-</span> FHSdata  <span class="sc">|&gt;</span></span>
<span id="cb50-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-8" tabindex="-1"></a>    <span class="fu">left_join</span>(FHSAAdata, </span>
<span id="cb50-9"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-9" tabindex="-1"></a>              <span class="at">by =</span> <span class="st">&quot;school_name&quot;</span>)</span>
<span id="cb50-10"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-10" tabindex="-1"></a></span>
<span id="cb50-11"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-11" tabindex="-1"></a>GradCountsRates <span class="ot">&lt;-</span> FloridaHighSchools3 <span class="sc">|&gt;</span> </span>
<span id="cb50-12"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-12" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">est_Ngrads =</span> </span>
<span id="cb50-13"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-13" tabindex="-1"></a>               <span class="fu">round</span>(est_enrollment <span class="sc">*</span> .<span class="dv">01</span> <span class="sc">*</span></span>
<span id="cb50-14"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-14" tabindex="-1"></a>               graduation_rate_2022_23),<span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb50-15"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-15" tabindex="-1"></a>    <span class="fu">select</span>(district_name, est_enrollment, est_Ngrads) <span class="sc">|&gt;</span> </span>
<span id="cb50-16"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-16" tabindex="-1"></a>    <span class="fu">group_by</span>(district_name) <span class="sc">|&gt;</span> </span>
<span id="cb50-17"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-17" tabindex="-1"></a>    <span class="fu">summarise_if</span>(is.numeric,sum, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb50-18"><a href="finding-exploring-cleaning-and-combining-data.html#cb50-18" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">adjGradRate =</span> est_Ngrads <span class="sc">/</span> est_enrollment)</span></code></pre></div>
</div>
</div>
<div id="estimating-the-relationship-between-economic-disadvantage-and-graduation-rates" class="section level3 hasAnchor" number="12.2.3">
<h3><span class="header-section-number">12.2.3</span> estimating the relationship between economic disadvantage and graduation rates<a href="finding-exploring-cleaning-and-combining-data.html#estimating-the-relationship-between-economic-disadvantage-and-graduation-rates" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We now have two approaches to estimating graduation rates at the level of school districts - the first is based on the simple average by schools, the second is based on the estimated enrollment data. How do these relate to each other and to other measures in the data such as economic disadvantage?</p>
<p>Here, we join the two district-level files, rename our two graduation measures, and compute the correlations among the measures. We use the correlate function (in the corrr package), which makes the correlation matrix into a tibble, round the entries to two decimal places, and make into a table, which we format using the kable function from the kableExtra package.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-1" tabindex="-1"></a>FloridaHighSchoolsbyDistict <span class="sc">|&gt;</span>      </span>
<span id="cb51-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-2" tabindex="-1"></a>    <span class="fu">left_join</span>(GradCountsRates) <span class="sc">|&gt;</span>          </span>
<span id="cb51-3"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-3" tabindex="-1"></a>    <span class="fu">select</span>(graduation_rate_2022_23,</span>
<span id="cb51-4"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-4" tabindex="-1"></a>           adjGradRate, </span>
<span id="cb51-5"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-5" tabindex="-1"></a>           <span class="at">percent_disadvantaged_students =</span> percent_of_economically_disadvantaged_students) <span class="sc">|&gt;</span></span>
<span id="cb51-6"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-6" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">grad_rate_raw =</span> graduation_rate_2022_23,</span>
<span id="cb51-7"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-7" tabindex="-1"></a>           <span class="at">grad_rate_weighted =</span> adjGradRate) <span class="sc">|&gt;</span></span>
<span id="cb51-8"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-8" tabindex="-1"></a>    <span class="fu">correlate</span>() <span class="sc">|&gt;</span></span>
<span id="cb51-9"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-9" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-10"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-10" tabindex="-1"></a>    <span class="fu">kable</span>(<span class="at">table.attr =</span> <span class="st">&quot;style=&#39;width:30%;&#39;&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-11"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-11" tabindex="-1"></a>    <span class="fu">column_spec</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">width =</span> <span class="st">&quot;14em&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-12"><a href="finding-exploring-cleaning-and-combining-data.html#cb51-12" tabindex="-1"></a>    <span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## Joining with `by =
## join_by(district_name)`
## Correlation computed with •
## Method: &#39;pearson&#39; • Missing
## treated using:
## &#39;pairwise.complete.obs&#39;</code></pre>
<table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
term
</th>
<th style="text-align:right;">
grad_rate_raw
</th>
<th style="text-align:right;">
grad_rate_weighted
</th>
<th style="text-align:right;">
percent_disadvantaged_students
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 14em; ">
grad_rate_raw
</td>
<td style="text-align:right;width: 14em; ">
NA
</td>
<td style="text-align:right;width: 14em; ">
0.88
</td>
<td style="text-align:right;width: 14em; ">
-0.51
</td>
</tr>
<tr>
<td style="text-align:left;width: 14em; ">
grad_rate_weighted
</td>
<td style="text-align:right;width: 14em; ">
0.88
</td>
<td style="text-align:right;width: 14em; ">
NA
</td>
<td style="text-align:right;width: 14em; ">
-0.38
</td>
</tr>
<tr>
<td style="text-align:left;width: 14em; ">
percent_disadvantaged_students
</td>
<td style="text-align:right;width: 14em; ">
-0.51
</td>
<td style="text-align:right;width: 14em; ">
-0.38
</td>
<td style="text-align:right;width: 14em; ">
NA
</td>
</tr>
</tbody>
</table>
<p>The two measures of graduation rates are similar but not identical (r = .88), and each is negatively associated with economic disadvantage (rs of -.38 and -.51). These correlations are high.</p>
</div>
</div>
<div id="recap-on-joining-files" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> recap / on joining files<a href="finding-exploring-cleaning-and-combining-data.html#recap-on-joining-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this chapter, we’ve examined Florida High School data and found an (expected) negative relationship between economic disadvantage and graduation rates. We also saw a picture of the guitarist from the hair band Guns ‘n’ Roses. We used a number of functions, such as <em>select</em>, <em>filter</em>, <em>mutate</em>, <em>group_by</em>, <em>summarise</em>, and <em>case_when,</em> that we also considered in the last chapter. We also used some new libraries, including readxl, corrr, and kableExtra, and their functions read_excel, correlate, and kable.</p>
<p>The core of this chapter is to introduce some of the challenges of combining files, including both (a) the frequent need to wrangle datasets so that they can be correctly put together and (b) the use of the <em>left_join</em> function. The left_join function is one of many different ways of joining data.</p>
<p>In our left_join, we kept all of the rows in the first dataset (x, FHSdata), and linked them to y (FHSAAdata) if and only if they have a match on the key variable (school_name). In a right join, we keep all of y, and rows in x if and only if they have a match in y. So we could also have written our code as</p>
<blockquote>
<p>FloridaHighSchools3 &lt;- FHSAAdata |&gt;<br />
right_join(FHSdata,<br />
by = “school_name”)</p>
</blockquote>
<p>There are also <em>inner_joins</em> (which can be thought of as the intersection of the two datasets, including only rows in each dataset which match) , and <em>full_joins</em> (unions, which keep all rows in both datasets). And <em>anti_joins</em> include only the rows in x which do not have a match in y. We will return to anti-joins in our discussion of text analysis.</p>
<p>In combining datasets, joins are but one approach. We can also simply bind files together, without regard for a common key. Here, (and in the last chapter) we used <em>bind_rows</em> to add new observations to an existing dataset - this is typically used when two datasets have the same set of variables. Finally, bind_cols can be used to add new variables when two datasets have the same observations and in the same order.</p>

<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="finding-exploring-cleaning-and-combining-data.html#cb53-1" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-2"><a href="finding-exploring-cleaning-and-combining-data.html#cb53-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="wrangling-and-tidying.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="applied-data-science.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
